---
title: 俄罗斯方块
author: Flowerowl
layout: post
permalink: /2155.html
duoshuo_thread_id:
  - 2129987
views:
  - 754
bot_views:
  - 1
categories:
  - 代码
tags:
  - JS
  - 俄罗斯方块
---
<span style="color: #ff0000;"><a href="http://lazynight.me/z/tetris/index.html" target="_blank"><span style="color: #ff0000;">在线试玩</span></a></span>

[<img class="alignnone size-full wp-image-2156" title="tetris" src="http://lazynight.me/wp-content/uploads/2012/05/tetris.gif" alt="" width="534" height="288" />][1]

源码：

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); ">
  <span style="color: rgb(170, 170, 170); font-style: italic; ">001 </span> <span style="color: rgb(0, 0, 170); ">function</span> <span style="color: rgb(0, 0, 0); ">Tetris</span><span style="color: rgb(0, 0, 0); ">(){}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">002 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">Tetris</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">prototype</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">{</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">003 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">BlogsSetting</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//方块设置</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">004 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(248, 16, 176); ">005 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">006 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">007 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">008 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">009 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(248, 16, 176); ">010 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">011 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">012 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">013 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">014 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span> <br /><span style="color: rgb(248, 16, 176); ">015 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">016 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">017 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">018 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">019 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <br /><span style="color: rgb(248, 16, 176); ">020 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">021 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">022 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">023 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">024 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(248, 16, 176); ">025 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">026 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">027 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">028 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">029 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(248, 16, 176); ">030 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">031 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">032 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">033 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">034 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(248, 16, 176); ">035 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">036 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">037 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">038 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">039 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(248, 16, 176); ">040 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">041 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">042 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">043 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">044 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span><br /><span style="color: rgb(248, 16, 176); ">045 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">]</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">046 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">],</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">047 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 0); ">[],</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//游戏地图，对应table中的td值</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">048 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">BlokWidth</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); ">28</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//方块集的宽高，也就是images/tetris_grid.gif图片的宽高</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">049 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">HorizontalNum</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); ">10</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//水平td数量</span><br /><span style="color: rgb(248, 16, 176); ">050 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">VerticalNum</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); ">18</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//垂直td数量</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">051 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">BlokSize</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); ">4</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//设置方块占用位置4 * 4</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">052 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取当前方块的非0的最大宽度</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">053 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取当前方块的非0的最大高度</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">054 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//当前随机获得的索引</span><br /><span style="color: rgb(248, 16, 176); ">055 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">NextCurrentIndex</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取下一个方块的索引</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">056 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 0); ">[],</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//当前方块</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">057 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 0); ">{},</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//当前方块运动的x,y</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">058 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">IsPlay</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">false</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//是否开始游戏</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">059 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">IsOver</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">false</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//游戏是否结束</span><br /><span style="color: rgb(248, 16, 176); ">060 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">IsOverIndex</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//设置游戏结束的索引还有空几行</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">061 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">Score</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">062 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">ScoreIndex</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 153, 153); ">100</span><span style="color: rgb(0, 0, 0); ">,</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">063 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">:</span> <span style="color: rgb(0, 0, 0); ">[[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">28</span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">56</span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">84</span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">112</span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">140</span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">168</span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],</span> <span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span> <span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]],</span> <span style="color: rgb(170, 170, 170); font-style: italic; ">//颜色的枚举，对应BlogsSetting</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">064 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">CreateMap</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><br /><span style="color: rgb(248, 16, 176); ">065 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(170, 170, 170); font-style: italic; ">//加载地图，设置其宽高，根据HorizontalNum,VerticalNum的数量决定</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">066 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">map</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getElementById</span>(<span style="color: rgb(170, 85, 0); ">"map"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">067 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">w</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokWidth</span><span style="color: rgb(0, 0, 0); ">*</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">068 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">h</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokWidth</span><span style="color: rgb(0, 0, 0); ">*</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">VerticalNum</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">069 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">map</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">width</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">w</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span>;<br /><span style="color: rgb(248, 16, 176); ">070 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">map</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">height</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">h</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">071 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(170, 170, 170); font-style: italic; ">//加载地图对应的数组，初始化为0，当被占据时为1</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">072 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">VerticalNum</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">073 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">push</span><span style="color: rgb(0, 0, 0); ">([]);</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">074 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(248, 16, 176); ">075 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">076 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">077 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">078 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(170, 170, 170); font-style: italic; ">//创建table td填充div根据HorizontalNum,VerticalNum的数量决定，创建HorizontalNum * VerticalNum的表格区域</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">079 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">table</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"table"</span>);<br /><span style="color: rgb(248, 16, 176); ">080 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">id</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"area"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">081 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tbody</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"tbody"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">082 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">cellPadding</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">083 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">cellSpacing</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">084 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">tbody</span>);<br /><span style="color: rgb(248, 16, 176); ">085 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">VerticalNum</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">086 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tr</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"tr"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">087 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">088 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">td</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"td"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">089 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tr</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">td</span>);<br /><span style="color: rgb(248, 16, 176); ">090 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">091 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tbody</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">tr</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">092 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">093 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">map</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">table</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">094 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CreatePreViewMap</span>();<br /><span style="color: rgb(248, 16, 176); ">095 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CreateNextBlock</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">096 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">097 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">CreatePreViewMap</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//加载一个4*4的表格到预览区域</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">098 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">preview</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getElementById</span>(<span style="color: rgb(170, 85, 0); ">"previewArea"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">099 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">table</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"table"</span>);<br /><span style="color: rgb(248, 16, 176); ">100 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">id</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"perviewTable"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">101 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tbody</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"tbody"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">102 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">cellPadding</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">103 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">cellSpacing</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">104 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">table</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">tbody</span>);<br /><span style="color: rgb(248, 16, 176); ">105 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokSize</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">106 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tr</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"tr"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">107 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokSize</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">108 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">td</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">createElement</span>(<span style="color: rgb(170, 85, 0); ">"td"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">109 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tr</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">td</span>);<br /><span style="color: rgb(248, 16, 176); ">110 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">111 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tbody</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">tr</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">112 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">113 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">preview</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">appendChild</span>(<span style="color: rgb(0, 0, 0); ">table</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">114 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(248, 16, 176); ">115 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">LoadPreview</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span>(<span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//加载到预览区域</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">116 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">previewTable</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getElementById</span>(<span style="color: rgb(170, 85, 0); ">"perviewTable"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">117 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlogsSetting</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">length</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">118 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlogsSetting</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">length</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">119 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">previewTable</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">""</span>;<br /><span style="color: rgb(248, 16, 176); ">120 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlogsSetting</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">121 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">previewTable</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"url(images/tetris.gif)"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">122 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">previewTable</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundPosition</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">" "</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">123 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">124 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">125 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">126 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">127 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">SettingBlock</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//设置地图中方块的背景图片</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">128 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tb</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getTable</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">129 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(248, 16, 176); ">130 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">131 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">132 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"url(images/tetris.gif)"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">133 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundPosition</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">" "</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">134 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">135 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">136 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">137 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">138 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">CanMove</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span>(<span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//根据传过来的x,y，检测方块是否能左右下移动</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">139 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">VerticalNum</span>)<span style="color: rgb(170, 170, 170); font-style: italic; ">//判断是否有到最底部，如果到底部的话停止向下移动</span><br /><span style="color: rgb(248, 16, 176); ">140 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 0, 170); ">false</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">141 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">&#8211;</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//检测方块的最高坐标相对应的地图的坐标是否有都等于1，如果有等于1说明地图放不下该方块</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">142 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">143 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">&&</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">144 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsOverIndex</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">i</span>;<br /><span style="color: rgb(248, 16, 176); ">145 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsOver</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">true</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">146 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">147 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">148 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">149 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">&#8211;</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//检测方块的移动轨迹在地图中是否有被标记为1，如果有被标记为1就是下一步的轨迹不能运行。</span><br /><span style="color: rgb(248, 16, 176); ">150 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">151 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">&&</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//判断方块的下一步轨迹是否是1并且判断下一步方块的轨迹在地图中是否有为1。</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">152 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 0, 170); ">false</span>;&nbsp;&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">153 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">154 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><span style="color: rgb(248, 16, 176); ">155 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">156 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 0, 170); ">true</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">157 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">158 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">ClearOldBlok</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//当this.InitPosition.y>=0 也就是显示在地图的时候，每次左右下移动时清除方块，使得重新绘制方块</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">159 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(248, 16, 176); ">160 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">161 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">162 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">163 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getTable</span><span style="color: rgb(0, 0, 0); ">().</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">""</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">164 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">165 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">166 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">167 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">168 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">169 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">MoveLeft</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span>&nbsp;&nbsp;&nbsp; <span style="color: rgb(170, 170, 170); font-style: italic; ">//向左移动</span><br /><span style="color: rgb(248, 16, 176); ">170 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">x</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">171 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 153, 153); "></span>||<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">==-</span><span style="color: rgb(0, 153, 153); ">1</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">172 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">173 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CanMove</span>(<span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">)){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">174 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ClearOldBlok</span>();<br /><span style="color: rgb(248, 16, 176); ">175 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">x</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">176 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">177 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">SettingBlock</span>();&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">178 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">179 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">MoveRight</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//向右移动</span><br /><span style="color: rgb(248, 16, 176); ">180 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">x</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 153, 153); ">1</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">181 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>||<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">==-</span><span style="color: rgb(0, 153, 153); ">1</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">182 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">183 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CanMove</span>(<span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">)){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">184 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ClearOldBlok</span>();<br /><span style="color: rgb(248, 16, 176); ">185 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">x</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">186 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">187 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">SettingBlock</span>();&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">188 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">189 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">MoveDown</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//向下移动</span><br /><span style="color: rgb(248, 16, 176); ">190 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">y</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 153, 153); ">1</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">191 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CanMove</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">)){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//判断是否能向下移动，不能的话表示该方块停止运行，继续判断是否游戏结束，如果游戏还没结束重新创建个方块继续游戏</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">192 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ClearOldBlok</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">193 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">y</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">194 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">SettingBlock</span>();<br /><span style="color: rgb(248, 16, 176); ">195 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">196 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">else</span><span style="color: rgb(0, 0, 0); ">{</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">197 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsOver</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">198 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 170, 170); ">window</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">clearTimeout</span>(<span style="color: rgb(0, 0, 0); ">OverTime</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">199 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameOver</span>();<br /><span style="color: rgb(248, 16, 176); ">200 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">201 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">202 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">SettingBlock</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">203 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">SettingGameMap</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">204 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CheckFull</span>();<br /><span style="color: rgb(248, 16, 176); ">205 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">NewBlock</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">206 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CreateNextBlock</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">207 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">208 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">209 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(248, 16, 176); ">210 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">ChangeBlock</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//向上方块变型</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">211 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">==-</span><span style="color: rgb(0, 153, 153); ">1</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">212 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">213 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">newBlock</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 0); ">[[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">],[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]];</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">214 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(248, 16, 176); ">215 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">216 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">newBlock</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">]</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">];</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">217 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">218 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span> <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">219 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">temp</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>;<br /><span style="color: rgb(248, 16, 176); ">220 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ClearOldBlok</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">221 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">newBlock</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">222 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetWidth</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">223 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetHeight</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">224 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span><span style="color: rgb(0, 0, 0); ">||!</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CanMove</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">)){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//this.InitPosition.x+this.BlockWidth>=this.HorizontalNum判断变型后x+它的宽度是否有超过地图的宽度</span><br /><span style="color: rgb(248, 16, 176); ">225 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">temp</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">226 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetHeight</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">227 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetWidth</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">228 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">229 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">SettingBlock</span>();<br /><span style="color: rgb(248, 16, 176); ">230 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">231 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">CheckFull</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//检测是否有满行的</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">232 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">arr</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">[];</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">233 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">VerticalNum</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">234 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">flag</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">true</span>;<br /><span style="color: rgb(248, 16, 176); ">235 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">236 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">237 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">flag</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">false</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">238 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">break</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">239 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">240 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">241 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">flag</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">242 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ClearFull</span>(<span style="color: rgb(0, 0, 0); ">i</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">243 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">244 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">245 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><span style="color: rgb(170, 170, 170); font-style: italic; ">246 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">247 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">ClearFull</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span>(<span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//清除满行的，使上一行的背景图等于该行，并使上一行的坐标值等于该行，如果是第一行的话坐标值清0，背景清空</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">248 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tb</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getTable</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">249 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">index</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">){</span> <br /><span style="color: rgb(248, 16, 176); ">250 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">251 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">252 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">""</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">253 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">254 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">255 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">else</span><span style="color: rgb(0, 0, 0); ">{</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">256 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">index</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">></span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">&#8211;</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">257 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">258 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">];</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">259 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span>;<br /><span style="color: rgb(248, 16, 176); ">260 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundPosition</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundPosition</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">261 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">262 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">263 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">264 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getScore</span><span style="color: rgb(0, 0, 0); ">().</span><span style="color: rgb(0, 0, 0); ">innerHTML</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 170, 170); ">parseInt</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getScore</span><span style="color: rgb(0, 0, 0); ">().</span><span style="color: rgb(0, 0, 0); ">innerHTML</span>)<span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ScoreIndex</span>;<br /><span style="color: rgb(248, 16, 176); ">265 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">266 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">NewBlock</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//创建方块，初始化数据</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">267 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">NextCurrentIndex</span>;<span style="color: rgb(170, 170, 170); font-style: italic; ">//获取下一个方块的索引作为当前索引</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">268 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlogsSetting</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">];</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//根据获得的新索引重新获取方块</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">269 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetWidth</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<span style="color: rgb(170, 170, 170); font-style: italic; ">//重新获取方块的最大宽值</span><br /><span style="color: rgb(248, 16, 176); ">270 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetHeight</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<span style="color: rgb(170, 170, 170); font-style: italic; ">//重新获取方块的最大高值</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">271 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetInitPosition</span>();<span style="color: rgb(170, 170, 170); font-style: italic; ">//初始化方块出现的坐标</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">272 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">273 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">GameOver</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//游戏结束后补齐获得当前方块，补齐地图空白地方</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">274 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">tb</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getTable</span>();<br /><span style="color: rgb(248, 16, 176); ">275 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsOverIndex</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">&#8211;</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//循环空白的IsOverIndex-1行，给空白的行补上当前方块，从最高值递件。减1是因为IsOverIndex获取的是被占据的行，所以减1为空白行。</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">276 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">277 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">278 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundImage</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"url(images/tetris.gif)"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">279 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">tb</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">rows</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">cells</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">style</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">backgroundPosition</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 153, 153); "></span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">" "</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ColorEnum</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(170, 85, 0); ">"px"</span>;<br /><span style="color: rgb(248, 16, 176); ">280 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">281 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">282 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">283 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsPlay</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">false</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">284 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">alert</span>(<span style="color: rgb(170, 85, 0); ">"游戏结束"</span>);<br /><span style="color: rgb(248, 16, 176); ">285 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">286 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">SettingGameMap</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//设置游戏地图被占有的位置标记为1</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">287 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">++</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">288 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">289 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(248, 16, 176); ">290 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GameMap</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">+</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); ">1</span>;<span style="color: rgb(170, 170, 170); font-style: italic; ">//减1是因为每次y加1，然后在去进行判断，所以当碰到方块或底部的时候要减去多加的1</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">291 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">292 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">293 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">Start</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//游戏开始</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">294 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsPlay</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">true</span>;<br /><span style="color: rgb(248, 16, 176); ">295 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">NextCurrentIndex</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">296 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlogsSetting</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CurrentIndex</span><span style="color: rgb(0, 0, 0); ">];</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">297 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockWidth</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetWidth</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">298 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlockHeight</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetHeight</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokCurrent</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">299 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">GetInitPosition</span>();<br /><span style="color: rgb(248, 16, 176); ">300 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">MoveDown</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">301 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CreateNextBlock</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">302 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">303 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">CreateNextBlock</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取下一个方块的索引，并显示在预览区域中</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">304 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">NextCurrentIndex</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getRandom</span>();<br /><span style="color: rgb(248, 16, 176); ">305 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">LoadPreview</span>(<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">NextCurrentIndex</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">306 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">307 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">GetHeight</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span>(<span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取当前方块不是0的最大高值</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">308 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">length</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">&#8211;</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">309 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">length</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span>)<br /><span style="color: rgb(248, 16, 176); ">310 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">311 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 0, 0); ">i</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">312 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">313 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">GetWidth</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span>(<span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取当前方块不是0的最大宽值</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">314 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">length</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 153, 153); ">1</span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">>=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">&#8211;</span>)<br /><span style="color: rgb(248, 16, 176); ">315 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">for</span>(<span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); "></span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); "><</span><span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">].</span><span style="color: rgb(0, 0, 0); ">length</span>;<span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">++</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">316 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">blokArr</span><span style="color: rgb(0, 0, 0); ">[</span><span style="color: rgb(0, 0, 0); ">j</span><span style="color: rgb(0, 0, 0); ">][</span><span style="color: rgb(0, 0, 0); ">i</span><span style="color: rgb(0, 0, 0); ">]</span><span style="color: rgb(0, 0, 0); ">==</span><span style="color: rgb(0, 153, 153); ">1</span>)<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">317 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 0, 0); ">i</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">318 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">319 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">GetInitPosition</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//获取方块的初始位置</span><br /><span style="color: rgb(248, 16, 176); ">320 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">InitPosition</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 0); ">{</span><span style="color: rgb(0, 0, 0); ">x</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 170, 170); ">Math</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">floor</span>((<span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">HorizontalNum</span><span style="color: rgb(0, 0, 0); ">-</span><span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">BlokSize</span>)<span style="color: rgb(0, 0, 0); ">/</span><span style="color: rgb(0, 153, 153); ">2</span><span style="color: rgb(0, 0, 0); ">),</span><span style="color: rgb(0, 0, 0); ">y</span><span style="color: rgb(0, 0, 0); ">:-</span><span style="color: rgb(0, 153, 153); ">1</span><span style="color: rgb(0, 0, 0); ">};</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">321 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">322 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">getRandom</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//随机获得7种放块中的其中一种</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">323 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 170, 170); ">Math</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">floor</span>(<span style="color: rgb(0, 170, 170); ">Math</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">random</span>()<span style="color: rgb(0, 0, 0); ">*</span><span style="color: rgb(0, 153, 153); ">7</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">324 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(248, 16, 176); ">325 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">getTable</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">326 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getElementById</span>(<span style="color: rgb(170, 85, 0); ">"area"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">327 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">},</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">328 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">getScore</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">329 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">return</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getElementById</span>(<span style="color: rgb(170, 85, 0); ">"score"</span>);<br /><span style="color: rgb(248, 16, 176); ">330 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">331 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">332 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">t</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 170); ">new</span> <span style="color: rgb(0, 0, 0); ">Tetris</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">333 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">OverTime</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">null</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">334 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">IsPause</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">false</span>;<br /><span style="color: rgb(248, 16, 176); ">335 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">Speed</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 153, 153); ">500</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">336 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">btn_start</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">337 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 170, 170); ">window</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">onload</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">InitGame</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">338 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">function</span> <span style="color: rgb(0, 0, 0); ">InitGame</span><span style="color: rgb(0, 0, 0); ">(){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">339 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">CreateMap</span>();<br /><span style="color: rgb(248, 16, 176); ">340 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">btn_start</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 170, 170); ">document</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">getElementById</span>(<span style="color: rgb(170, 85, 0); ">"start"</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">341 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">btn_start</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">onclick</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 170); ">function</span><span style="color: rgb(0, 0, 0); ">(){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">342 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">Start</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">343 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">value</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"P 暂停游戏"</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">344 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">OverTime</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">setInterval</span>(<span style="color: rgb(0, 0, 0); ">MoveBoxDown</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 0); ">Speed</span>);<br /><span style="color: rgb(248, 16, 176); ">345 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">this</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">disabled</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"disabled"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">346 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">347 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">348 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">function</span> <span style="color: rgb(0, 0, 0); ">MoveBoxDown</span><span style="color: rgb(0, 0, 0); ">(){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">349 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">MoveDown</span>();<br /><span style="color: rgb(248, 16, 176); ">350 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">351 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">function</span> <span style="color: rgb(0, 0, 0); ">KeyDown</span>(<span style="color: rgb(0, 0, 0); ">e</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">352 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">!</span><span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsPlay</span>||<span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">IsOver</span>)<span style="color: rgb(0, 0, 170); ">return</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">353 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">e</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">e</span>||<span style="color: rgb(0, 170, 170); ">window</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">event</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">354 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">var</span> <span style="color: rgb(0, 0, 0); ">keyCode</span> <span style="color: rgb(0, 0, 0); ">=</span> <span style="color: rgb(0, 0, 0); ">e</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">keyCode</span>||<span style="color: rgb(0, 0, 0); ">e</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">which</span>||<span style="color: rgb(0, 0, 0); ">e</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">charCode</span>;<br /><span style="color: rgb(248, 16, 176); ">355 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">switch</span>(<span style="color: rgb(0, 0, 0); ">keyCode</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">356 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">case</span> <span style="color: rgb(0, 153, 153); ">37</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//左</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">357 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">!</span><span style="color: rgb(0, 0, 0); ">IsPause</span>)<span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">MoveLeft</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">358 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">break</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">359 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">case</span> <span style="color: rgb(0, 153, 153); ">38</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//上</span><br /><span style="color: rgb(248, 16, 176); ">360 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">!</span><span style="color: rgb(0, 0, 0); ">IsPause</span>)<span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">ChangeBlock</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">361 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">break</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">362 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">case</span> <span style="color: rgb(0, 153, 153); ">39</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//右</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">363 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">!</span><span style="color: rgb(0, 0, 0); ">IsPause</span>)<span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">MoveRight</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">364 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">break</span>;<br /><span style="color: rgb(248, 16, 176); ">365 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">case</span> <span style="color: rgb(0, 153, 153); ">40</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//下</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">366 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">!</span><span style="color: rgb(0, 0, 0); ">IsPause</span>)<span style="color: rgb(0, 0, 0); ">t</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">MoveDown</span>();<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">367 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">break</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">368 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">case</span> <span style="color: rgb(0, 153, 153); ">80</span><span style="color: rgb(0, 0, 0); ">:</span><span style="color: rgb(170, 170, 170); font-style: italic; ">//p 暂停or开始</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">369 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">IsPause</span><span style="color: rgb(0, 0, 0); ">=!</span><span style="color: rgb(0, 0, 0); ">IsPause</span>;<br /><span style="color: rgb(248, 16, 176); ">370 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">if</span>(<span style="color: rgb(0, 0, 0); ">IsPause</span><span style="color: rgb(0, 0, 0); ">){</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">371 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">btn_start</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">value</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"P 开始游戏"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">372 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 170, 170); ">window</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">clearInterval</span>(<span style="color: rgb(0, 0, 0); ">OverTime</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">373 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">374 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">else</span><span style="color: rgb(0, 0, 0); ">{</span><br /><span style="color: rgb(248, 16, 176); ">375 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">btn_start</span><span style="color: rgb(0, 0, 0); ">.</span><span style="color: rgb(0, 0, 0); ">value</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(170, 85, 0); ">"P 暂停游戏"</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">376 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">OverTime</span><span style="color: rgb(0, 0, 0); ">=</span><span style="color: rgb(0, 0, 0); ">setInterval</span>(<span style="color: rgb(0, 0, 0); ">MoveBoxDown</span><span style="color: rgb(0, 0, 0); ">,</span><span style="color: rgb(0, 0, 0); ">Speed</span>);<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">377 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(170, 170, 170); font-style: italic; ">378 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 170); ">break</span>;<br /><span style="color: rgb(170, 170, 170); font-style: italic; ">379 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span><br /><span style="color: rgb(248, 16, 176); ">380 </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); ">}</span>
</div>

转载请注明：[于哲的博客][2] &raquo; [俄罗斯方块][3]

 [1]: http://lazynight.me/wp-content/uploads/2012/05/tetris.gif
 [2]: http://localhost/wordpress
 [3]: http://localhost/wordpress/2155.html