---
title: Qt学习笔记(4)：获取系统当前时间
author: Flowerowl
layout: post
permalink: /606.html
duoshuo_thread_id:
  - 1266871
views:
  - 2672
bot_views:
  - 2
categories:
  - 代码
tags:
  - Qt
---
  
<img class="aligncenter size-full wp-image-607" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/10/20111022155341.jpg" alt="" width="373" height="90" />

<span style="color: #ff6600;">MainWindow.h</span>

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">01</span> <span style="color: #ffffff;">#ifndef MAINWINDOW_H</span><br /> <span style="color: #696969;">02</span> <span style="color: #ffffff;">#define MAINWINDOW_H</span><br /> <span style="color: #696969;">03</span><br /> <span style="color: #696969;">04</span> <span style="color: #ffffff;">#include <QMainWindow></span><br /> <span style="color: #f810b0;">05</span><br /> <span style="color: #696969;">06</span> <span style="color: #ff4400; font-weight: bold;">namespace</span> <span style="color: #c0c0c0;">Ui</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">07</span>     <span style="color: #ff4400; font-weight: bold;">class</span> <span style="color: #c0c0c0;">MainWindow</span>;<br /> <span style="color: #696969;">08</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">09</span><br /> <span style="color: #f810b0;">10</span> <span style="color: #ff4400; font-weight: bold;">class</span> <span style="color: #c0c0c0;">MainWindow</span> <span style="color: #c0c0c0;">:</span> <span style="color: #ff4400; font-weight: bold;">public</span> <span style="color: #c0c0c0;">QMainWindow</span><br /> <span style="color: #696969;">11</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">12</span>     <span style="color: #c0c0c0;">Q_OBJECT</span><br /> <span style="color: #696969;">13</span><br /> <span style="color: #696969;">14</span> <span style="color: #ff4400; font-weight: bold;">public</span><span style="color: #c0c0c0;">:</span><br /> <span style="color: #f810b0;">15</span>     <span style="color: #ff4400; font-weight: bold;">explicit</span> <span style="color: #c0c0c0;">MainWindow</span>(<span style="color: #c0c0c0;">QWidget</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">parent</span> <span style="color: #c0c0c0;">=</span> <span style="color: #c0c0c0;"></span>);<br /> <span style="color: #696969;">16</span>     <span style="color: #c0c0c0;">~</span><span style="color: #c0c0c0;">MainWindow</span>();<br /> <span style="color: #696969;">17</span><br /> <span style="color: #696969;">18</span> <span style="color: #ff4400; font-weight: bold;">private</span><span style="color: #c0c0c0;">:</span><br /> <span style="color: #696969;">19</span>     <span style="color: #c0c0c0;">Ui</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">MainWindow</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">ui</span>;<br /> <span style="color: #f810b0;">20</span><br /> <span style="color: #696969;">21</span> <span style="color: #ff4400; font-weight: bold;">private</span> <span style="color: #c0c0c0;">slots:</span><br /> <span style="color: #696969;">22</span>     <span style="color: #ffffff;">void</span> <span style="color: #c0c0c0;">timerUpDate</span>();<br /> <span style="color: #696969;">23</span> <span style="color: #c0c0c0;">};</span><br /> <span style="color: #696969;">24</span><br /> <span style="color: #f810b0;">25</span> <span style="color: #ffffff;">#endif </span><span style="color: #696969;">// MAINWINDOW_H</span>
</div>

&nbsp;

<span style="color: #ff6600;">MainWindow.cpp</span>

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">01</span> <span style="color: #ffffff;">#include &#8220;mainwindow.h&#8221;</span><br /> <span style="color: #696969;">02</span> <span style="color: #ffffff;">#include &#8220;ui_mainwindow.h&#8221;</span><br /> <span style="color: #696969;">03</span> <span style="color: #ffffff;">#include <QtCore></span><br /> <span style="color: #696969;">04</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">MainWindow</span>(<span style="color: #c0c0c0;">QWidget</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">parent</span>) <span style="color: #c0c0c0;">:</span><br /> <span style="color: #f810b0;">05</span>     <span style="color: #c0c0c0;">QMainWindow</span>(<span style="color: #c0c0c0;">parent</span><span style="color: #c0c0c0;">),</span><br /> <span style="color: #696969;">06</span>     <span style="color: #c0c0c0;">ui</span>(<span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Ui</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">MainWindow</span>)<br /> <span style="color: #696969;">07</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">08</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setupUi</span>(<span style="color: #ff4400; font-weight: bold;">this</span>);<br /> <span style="color: #696969;">09</span>     <span style="color: #c0c0c0;">QTimer</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">timer</span><span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">QTimer</span>(<span style="color: #ff4400; font-weight: bold;">this</span>);<br /> <span style="color: #f810b0;">10</span>     <span style="color: #696969;">//新建定时器</span><br /> <span style="color: #696969;">11</span>     <span style="color: #c0c0c0;">connect</span> (<span style="color: #c0c0c0;">timer</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">SIGNAL</span>(<span style="color: #c0c0c0;">timeout</span><span style="color: #c0c0c0;">()),</span><span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">SLOT</span>(<span style="color: #c0c0c0;">timerUpDate</span>()));<br /> <span style="color: #696969;">12</span>     <span style="color: #696969;">//关联定时器计满信号和相应的槽函数</span><br /> <span style="color: #696969;">13</span>     <span style="color: #c0c0c0;">timer</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">start</span>(<span style="color: #c0c0c0;">1000</span>);<br /> <span style="color: #696969;">14</span>     <span style="color: #696969;">//定时器开始计时，间隔1秒</span><br /> <span style="color: #f810b0;">15</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">16</span><br /> <span style="color: #696969;">17</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::~</span><span style="color: #c0c0c0;">MainWindow</span>()<br /> <span style="color: #696969;">18</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">19</span>     <span style="color: #ff4400; font-weight: bold;">delete</span> <span style="color: #c0c0c0;">ui</span>;<br /> <span style="color: #f810b0;">20</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">21</span> <span style="color: #ffffff;">void</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">timerUpDate</span>()<br /> <span style="color: #696969;">22</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">23</span>     <span style="color: #c0c0c0;">QDateTime</span> <span style="color: #c0c0c0;">time</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">QDateTime</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">currentDateTime</span>();<br /> <span style="color: #696969;">24</span>     <span style="color: #696969;">//获取系统当前时间</span><br /> <span style="color: #f810b0;">25</span>     <span style="color: #c0c0c0;">QString</span> <span style="color: #c0c0c0;">str</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">time</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">toString</span>(<span style="color: #d13800;">&#8220;yyyy-mm-dd hh:mm:ss dddd&#8221;</span>);<br /> <span style="color: #696969;">26</span>     <span style="color: #696969;">//设置系统时间显示格式</span><br /> <span style="color: #696969;">27</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">label</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setText</span>(<span style="color: #c0c0c0;">str</span>);<br /> <span style="color: #696969;">28</span>     <span style="color: #696969;">//在标签显示时间</span><br /> <span style="color: #696969;">29</span> <span style="color: #c0c0c0;">}</span>
</div>

<span style="color: #ff6600;"><a href="http://down.qiannao.com/space/file/flowerowl/-4e0a-4f20-5206-4eab/Lazy4_timer.rar/.page" target="_blank"><span style="color: #ff6600;">下载源码</span></a></span>

转载请注明：[于哲的博客][1] &raquo; [Qt学习笔记(4)：获取系统当前时间][2]

 [1]: http://localhost/wordpress
 [2]: http://localhost/wordpress/606.html