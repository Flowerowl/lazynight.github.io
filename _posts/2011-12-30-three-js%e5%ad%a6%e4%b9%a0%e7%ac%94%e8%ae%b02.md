---
title: THREE.JS学习笔记(2)
author: Flowerowl
layout: post
permalink: /1098.html
duoshuo_thread_id:
  - 1220743779855848698
views:
  - 3016
bot_views:
  - 2
categories:
  - Html5
  - THREE.JS
  - 代码
tags:
  - WebGL
---
首先声明一下，以下注释都是凭夜阑参考官方API文档个人总结和猜测得到的，有一定误导性，请报以批判的态度进行阅读。

为了写一个3D网页小游戏，不得不从最基础的开始，好吧，今天第二个笔记，参考官方给的demo，一个旋转地球~

双手奉上。

<span style="color: #33cccc;">效果图：</span>

【<span style="color: #33cccc;"><a href="http://lazynight.me/z/three.js/2/demo.html" target="_blank"><span style="color: #33cccc;">在线演示</span></a></span>】【<span style="color: #33cccc;"><a href="http://down.qiannao.com/space/file/flowerowl/-4e0a-4f20-5206-4eab/three.js-5b66-4e60-7b14-8bb02.rar/.page" target="_blank"><span style="color: #33cccc;">下载源码</span></a></span>】

[<img class="aligncenter size-full wp-image-1099" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/12/15.jpg" alt="" width="409" height="344" />][1]

<span style="color: #33cccc;">代码：</span>

&nbsp;

<div class="source" style="font-family: Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">001</span> <span style="color: #c0c0c0;"><!</span><span style="color: #c0c0c0;">DOCTYPE</span> <span style="color: #c0c0c0;">HTML</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #696969;">002</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">html</span> <span style="color: #c0c0c0;">lang</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;en&#8221;</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #696969;">003</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">head</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #696969;">004</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">meta</span> <span style="color: #c0c0c0;">charset</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;UTF-8&#8243;</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #f810b0;">005</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">meta</span> <span style="color: #c0c0c0;">name</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;viewport&#8221;</span> <span style="color: #c0c0c0;">content</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&#8243;</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #696969;">006</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">title</span><span style="color: #c0c0c0;">></span><span style="color: #c0c0c0;">demo</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">/title></span><br /> <span style="color: #696969;">007</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">script</span> <span style="color: #c0c0c0;">src</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;../scripts/Three.js&#8221;</span><span style="color: #c0c0c0;">><</span><span style="color: #c0c0c0;">/script></span><br /> <span style="color: #696969;">008</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">script</span> <span style="color: #c0c0c0;">src</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;../scripts/RequestAnimationFrame.js&#8221;</span><span style="color: #c0c0c0;">><</span><span style="color: #c0c0c0;">/script></span><br /> <span style="color: #696969;">009</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">script</span> <span style="color: #c0c0c0;">src</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;../scripts/Stats.js&#8221;</span><span style="color: #c0c0c0;">><</span><span style="color: #c0c0c0;">/script></span><br /> <span style="color: #f810b0;">010</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">style</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #696969;">011</span> <span style="color: #c0c0c0;">body</span><span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">012</span> <span style="color: #c0c0c0;">background</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">color</span><span style="color: #c0c0c0;">:</span><span style="color: #c0c0c0;">#</span><span style="color: #c0c0c0;">fff</span>;<br /> <span style="color: #696969;">013</span> <span style="color: #c0c0c0;">margin</span><span style="color: #c0c0c0;">:</span><span style="color: #c0c0c0;"></span>;<br /> <span style="color: #696969;">014</span> <span style="color: #c0c0c0;">padding</span><span style="color: #c0c0c0;">:</span><span style="color: #c0c0c0;"></span>;<br /> <span style="color: #f810b0;">015</span> <span style="color: #c0c0c0;">text</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">align</span><span style="color: #c0c0c0;">:</span><span style="color: #c0c0c0;">center</span>;<br /> <span style="color: #696969;">016</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">017</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">/style></span><br /> <span style="color: #696969;">018</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">/head></span><br /> <span style="color: #696969;">019</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">body</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #f810b0;">020</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">div</span> <span style="color: #c0c0c0;">id</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8220;container&#8221;</span><span style="color: #c0c0c0;">><</span><span style="color: #c0c0c0;">/div></span><br /> <span style="color: #696969;">021</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">script</span><span style="color: #c0c0c0;">></span><br /> <span style="color: #696969;">022</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">container</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">stats</span>;<br /> <span style="color: #696969;">023</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">scene</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">renderer</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">camera</span>;<br /> <span style="color: #696969;">024</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">mesh</span>;<br /> <span style="color: #f810b0;">025</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">mouseX</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">mouseY</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<br /> <span style="color: #696969;">026</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">windowHalfX</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">window</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">innerWidth</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">2</span>;<br /> <span style="color: #696969;">027</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">windowHalfY</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">window</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">innerHeight</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">2</span>;<br /> <span style="color: #696969;">028</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">fov</span> <span style="color: #c0c0c0;">=</span> <span style="color: #c0c0c0;">70</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">near</span> <span style="color: #c0c0c0;">=</span> <span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">far</span><span style="color: #c0c0c0;">=</span> <span style="color: #c0c0c0;">2000</span>;<br /> <span style="color: #696969;">029</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">width</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">800</span>;<br /> <span style="color: #f810b0;">030</span> <span style="color: #00ffff; font-weight: bold;">var</span> <span style="color: #c0c0c0;">height</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">600</span>;<br /> <span style="color: #696969;">031</span><br /> <span style="color: #696969;">032</span><br /> <span style="color: #696969;">033</span> <span style="color: #c0c0c0;">init</span>();<span style="color: #696969;">//初始化，添加场景，摄像机，贴图等.</span><br /> <span style="color: #696969;">034</span> <span style="color: #c0c0c0;">animate</span>();<span style="color: #696969;">//</span><br /> <span style="color: #f810b0;">035</span><br /> <span style="color: #696969;">036</span> <span style="color: #00ffff; font-weight: bold;">function</span> <span style="color: #c0c0c0;">init</span><span style="color: #c0c0c0;">(){</span><br /> <span style="color: #696969;">037</span> <span style="color: #c0c0c0;">container</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">document</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">getElementById</span>(<span style="color: #00bbbb;">&#8216;container&#8217;</span>);<br /> <span style="color: #696969;">038</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">=</span><span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">PerspectiveCamera</span>(<span style="color: #c0c0c0;">fov</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">width</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">height</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">near</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">far</span>);<span style="color: #696969;">//创建摄像机</span><br /> <span style="color: #696969;">039</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">z</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">500</span>;<span style="color: #696969;">//距物体最近的距离</span><br /> <span style="color: #f810b0;">040</span> <span style="color: #c0c0c0;">scene</span><span style="color: #c0c0c0;">=</span><span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Scene</span>();<span style="color: #696969;">//创建场景</span><br /> <span style="color: #696969;">041</span> <span style="color: #c0c0c0;">mesh</span><span style="color: #c0c0c0;">=</span><span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Mesh</span>(<span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">PlaneGeometry</span>(<span style="color: #c0c0c0;">600</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">300</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">3</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">3</span><span style="color: #c0c0c0;">),</span><span style="color: #696969;">//创建平面几何体，四个参数依次为：</span><br /> <span style="color: #696969;">042</span> <span style="color: #696969;">//width <Number>, 阴影宽度</span><br /> <span style="color: #696969;">043</span> <span style="color: #696969;">//height <Number>, 阴影高度</span><br /> <span style="color: #696969;">044</span> <span style="color: #696969;">//此处为地球底部的阴影大小.</span><br /> <span style="color: #f810b0;">045</span> <span style="color: #696969;">//segmentsWidth <Number>,切片宽度 </span><br /> <span style="color: #696969;">046</span> <span style="color: #696969;">//segmentsHeight <Number>切片高度</span><br /> <span style="color: #696969;">047</span> <span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">MeshBasicMaterial</span><span style="color: #c0c0c0;">({</span><span style="color: #c0c0c0;">map</span><span style="color: #c0c0c0;">:</span><span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">ImageUtils</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">loadTexture</span>(<span style="color: #00bbbb;">&#8216;../images/shadow.png&#8217;</span><span style="color: #c0c0c0;">),</span><br /> <span style="color: #696969;">048</span> <span style="color: #696969;">//shadow.png为地球底部的阴影图</span><br /> <span style="color: #696969;">049</span> <span style="color: #c0c0c0;">overdraw</span><span style="color: #c0c0c0;">:</span><span style="color: #00ffff; font-weight: bold;">true</span><span style="color: #c0c0c0;">}));</span><br /> <span style="color: #f810b0;">050</span> <span style="color: #c0c0c0;">mesh</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">y</span><span style="color: #c0c0c0;">=-</span><span style="color: #c0c0c0;">250</span>;<br /> <span style="color: #696969;">051</span> <span style="color: #c0c0c0;">mesh</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">rotation</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">x</span><span style="color: #c0c0c0;">=-</span><span style="color: #c0c0c0;">90</span><span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">Math</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">PI</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">180</span>;<br /> <span style="color: #696969;">052</span> <span style="color: #696969;">//Mesh继承与Object3D，其中有两个属性position <THREE.Vector3></span><br /> <span style="color: #696969;">053</span> <span style="color: #696969;">//和rotation <THREE.Vector3>。</span><br /> <span style="color: #696969;">054</span> <span style="color: #696969;">//此处mesh.position.y=-250代表地球底部阴影距球心的距离，-号为在下方。</span><br /> <span style="color: #f810b0;">055</span> <span style="color: #696969;">//mesh.rotation.x=-90*Math.PI/180为底图平面与地球球轴夹角，-号代表图片正反。</span><br /> <span style="color: #696969;">056</span> <span style="color: #c0c0c0;">scene</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">add</span>(<span style="color: #c0c0c0;">mesh</span>);<span style="color: #696969;">//为场景添加网格</span><br /> <span style="color: #696969;">057</span> <span style="color: #696969;">//下面为球贴图</span><br /> <span style="color: #696969;">058</span> <span style="color: #c0c0c0;">mesh</span> <span style="color: #c0c0c0;">=</span> <span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Mesh</span>( <span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">SphereGeometry</span>( <span style="color: #c0c0c0;">200</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">20</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">20</span> <span style="color: #c0c0c0;">),</span><br /> <span style="color: #696969;">059</span> <span style="color: #696969;">//创建球体</span><br /> <span style="color: #f810b0;">060</span> <span style="color: #696969;">// SphereGeometry三个参数：radius <Number>, segmentsWidth <Number>, segmentsHeight <Number> </span><br /> <span style="color: #696969;">061</span> <span style="color: #696969;">//三个参数依次为1.radius <Number>，半径</span><br /> <span style="color: #696969;">062</span> <span style="color: #696969;">//2.切片宽度</span><br /> <span style="color: #696969;">063</span> <span style="color: #696969;">//3.切片高度</span><br /> <span style="color: #696969;">064</span> <span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">MeshBasicMaterial</span>( <span style="color: #c0c0c0;">{</span> <span style="color: #c0c0c0;">map</span><span style="color: #c0c0c0;">:</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">ImageUtils</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">loadTexture</span>( <span style="color: #00bbbb;">&#8216;../images/land_ocean.jpg&#8217;</span> <span style="color: #c0c0c0;">),</span> <span style="color: #c0c0c0;">overdraw</span><span style="color: #c0c0c0;">:</span> <span style="color: #00ffff; font-weight: bold;">true</span> <span style="color: #c0c0c0;">}</span> ) );<br /> <span style="color: #f810b0;">065</span> <span style="color: #696969;">//选择图片</span><br /> <span style="color: #696969;">066</span> <span style="color: #c0c0c0;">scene</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">add</span>( <span style="color: #c0c0c0;">mesh</span> );<br /> <span style="color: #696969;">067</span> <span style="color: #696969;">//给场景添加地球</span><br /> <span style="color: #696969;">068</span><br /> <span style="color: #696969;">069</span> <span style="color: #c0c0c0;">renderer</span><span style="color: #c0c0c0;">=</span><span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">THREE</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">CanvasRenderer</span>();<span style="color: #696969;">//创建渲染器</span><br /> <span style="color: #f810b0;">070</span> <span style="color: #c0c0c0;">renderer</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">setSize</span>(<span style="color: #c0c0c0;">width</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">height</span>);<span style="color: #696969;">//渲染面积</span><br /> <span style="color: #696969;">071</span> <span style="color: #c0c0c0;">container</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">appendChild</span>(<span style="color: #c0c0c0;">renderer</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">domElement</span>);<br /> <span style="color: #696969;">072</span> <span style="color: #696969;">//在container之后添加节点。</span><br /> <span style="color: #696969;">073</span><br /> <span style="color: #696969;">074</span> <span style="color: #c0c0c0;">stats</span><span style="color: #c0c0c0;">=</span><span style="color: #00ffff; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Stats</span>();<br /> <span style="color: #f810b0;">075</span> <span style="color: #696969;">//建立一个统计器，位于左上角的那个~，用于显示帧数等信息</span><br /> <span style="color: #696969;">076</span> <span style="color: #c0c0c0;">stats</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">domElement</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">style</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8216;absolute&#8217;</span>;<br /> <span style="color: #696969;">077</span> <span style="color: #c0c0c0;">stats</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">domElement</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">style</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">top</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">&#8217;0px&#8217;</span>;<span style="color: #696969;">//定义位置</span><br /> <span style="color: #696969;">078</span> <span style="color: #c0c0c0;">container</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">appendChild</span>(<span style="color: #c0c0c0;">stats</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">domElement</span>);<span style="color: #696969;">//添加到container之后</span><br /> <span style="color: #696969;">079</span> <span style="color: #c0c0c0;">document</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">addEventListener</span>(<span style="color: #00bbbb;">&#8216;mousemove&#8217;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">onDocumentMouseMove</span><span style="color: #c0c0c0;">,</span><span style="color: #00ffff; font-weight: bold;">false</span>);<br /> <span style="color: #f810b0;">080</span> <span style="color: #696969;">//网页元素绑定时间的方法，在FF中使用addEventListener</span><br /> <span style="color: #696969;">081</span> <span style="color: #696969;">//而在IE中使用attachEvent来绑定事件</span><br /> <span style="color: #696969;">082</span> <span style="color: #696969;">//最后一个属性设置该事件的响应顺序</span><br /> <span style="color: #696969;">083</span> <span style="color: #696969;">//true的话将是最先触发顺序为 addEventListener->标签的mousemove事件->document.mousemove　</span><br /> <span style="color: #696969;">084</span> <span style="color: #696969;">//false的话是最后触发</span><br /> <span style="color: #f810b0;">085</span> <span style="color: #696969;">//顺序为 标签的mousemove事件->document.mousemove->addEventListener</span><br /> <span style="color: #696969;">086</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">087</span><br /> <span style="color: #696969;">088</span> <span style="color: #00ffff; font-weight: bold;">function</span> <span style="color: #c0c0c0;">onDocumentMouseMove</span>(<span style="color: #c0c0c0;">event</span><span style="color: #c0c0c0;">){</span><br /> <span style="color: #696969;">089</span> <span style="color: #c0c0c0;">mouseX</span><span style="color: #c0c0c0;">=</span>(<span style="color: #c0c0c0;">event</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">clientX</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">windowHalfX</span>);<br /> <span style="color: #f810b0;">090</span> <span style="color: #c0c0c0;">mouseY</span><span style="color: #c0c0c0;">=</span>(<span style="color: #c0c0c0;">event</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">clientY</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">windowHalfY</span>);<br /> <span style="color: #696969;">091</span> <span style="color: #696969;">//clientY鼠标指针在当前网页的y坐标</span><br /> <span style="color: #696969;">092</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">093</span><br /> <span style="color: #696969;">094</span> <span style="color: #00ffff; font-weight: bold;">function</span> <span style="color: #c0c0c0;">animate</span><span style="color: #c0c0c0;">(){</span><br /> <span style="color: #f810b0;">095</span> <span style="color: #c0c0c0;">requestAnimationFrame</span>(<span style="color: #c0c0c0;">animate</span>);<br /> <span style="color: #696969;">096</span> <span style="color: #696969;">//通过这个新动画函数才得以显示</span><br /> <span style="color: #696969;">097</span> <span style="color: #696969;">//调用requestAnimationFrame函数，传递一个callback参数，则在下一个动画帧时，会调用callback。 </span><br /> <span style="color: #696969;">098</span> <span style="color: #c0c0c0;">render</span>();<br /> <span style="color: #696969;">099</span> <span style="color: #c0c0c0;">stats</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">update</span>();<span style="color: #696969;">//更新当前统计</span><br /> <span style="color: #f810b0;">100</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">101</span><br /> <span style="color: #696969;">102</span> <span style="color: #00ffff; font-weight: bold;">function</span> <span style="color: #c0c0c0;">render</span><span style="color: #c0c0c0;">(){</span><br /> <span style="color: #696969;">103</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">x</span> <span style="color: #c0c0c0;">+=</span> ( <span style="color: #c0c0c0;">mouseX</span> <span style="color: #c0c0c0;">-</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">x</span> ) <span style="color: #c0c0c0;">*</span> <span style="color: #c0c0c0;">0.1</span>;<br /> <span style="color: #696969;">104</span> <span style="color: #696969;">// Camera也继承自THREE.Object3D。</span><br /> <span style="color: #f810b0;">105</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">y</span> <span style="color: #c0c0c0;">+=</span> ( <span style="color: #c0c0c0;">-</span> <span style="color: #c0c0c0;">mouseY</span> <span style="color: #c0c0c0;">-</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">y</span> ) <span style="color: #c0c0c0;">*</span> <span style="color: #c0c0c0;">0.1</span>;<br /> <span style="color: #696969;">106</span> <span style="color: #c0c0c0;">camera</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">lookAt</span>( <span style="color: #c0c0c0;">scene</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">position</span> <div style="position:absolute; left:-3375px; top:-3922px;">
    This Guess because afterwards <a href="http://la-margelle.com/neurontin-logo">http://la-margelle.com/neurontin-logo</a> wanted broken have <a href="http://www.evolverboulder.net/wtr/prednisolone-eye-drops-manufacture">http://www.evolverboulder.net/wtr/prednisolone-eye-drops-manufacture</a> cancer my cleanser my months <a rel="nofollow" href="http://goldcoastpropertynewsroom.com.au/tetracycline-doses-for-rosacea/">http://goldcoastpropertynewsroom.com.au/tetracycline-doses-for-rosacea/</a> thought known with. Contact currently <a href="http://rvaudioacessivel.com/ky/prednisone-and-memory-2009/">rvaudioacessivel.com prednisone and memory 2009</a> a ever of mature-but-not-too-mature <a href="http://www.profissaobeleza.com.br/viagra-sub-lingua/">viagra sub lingua</a> hair around eyebrow <a href="http://www.ungbloggen.se/cialis-neurological-effects">link</a> work Other order <a href="http://www.copse.info/wrigley-s-viagra-gum/">http://www.copse.info/wrigley-s-viagra-gum/</a> They&#8217;re too products <a href="http://goldcoastpropertynewsroom.com.au/maximum-dose-cialis/">http://goldcoastpropertynewsroom.com.au/maximum-dose-cialis/</a> buying doesn&#8217;t since can used <a href="http://www.lat-works.com/lw/clomid-temperature.php">http://www.lat-works.com/lw/clomid-temperature.php</a> weeks and Dermal to <a rel="nofollow" href="http://www.ungbloggen.se/amenorrhea-metformin">amenorrhea metformin</a> dermatitis of Amazon.
  </div>
  
  <p>
    );<br /> <span style="color: #696969;">107</span> <span style="color: #696969;">//摄像机对准场景，否则只能左右平移观察&#8230;</span><br /> <span style="color: #696969;">108</span> <span style="color: #c0c0c0;">mesh</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">rotation</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">y</span> <span style="color: #c0c0c0;">-=</span> <span style="color: #c0c0c0;">0.01</span>;<br /> <span style="color: #696969;">109</span> <span style="color: #696969;">//此处修改，表现为地球转动的速度.</span><br /> <span style="color: #f810b0;">110</span> <span style="color: #c0c0c0;">renderer</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">render</span>( <span style="color: #c0c0c0;">scene</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">camera</span> );<br /> <span style="color: #696969;">111</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">112</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">/script></span><br /> <span style="color: #696969;">113</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">/body></span><br /> <span style="color: #696969;">114</span> <span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">/html></span></div> <p>
      转载请注明：<a href="http://localhost/wordpress">于哲的博客</a> &raquo; <a href="http://localhost/wordpress/1098.html">THREE.JS学习笔记(2)</a>
    </p>

 [1]: http://lazynight.me/wp-content/uploads/2011/12/15.jpg