---
title: 'C#每天抄一点(38):创建文本+输入内容'
author: Flowerowl
layout: post
permalink: /864.html
duoshuo_thread_id:
  - 1266906
views:
  - 590
bot_views:
  - 1
categories:
  - 'C#'
  - 代码
---
  
<span style="color: #ff6600;"> 这首曲子听了近3年，一直难以释怀，无论哪里，总会想起它。</span>

<span style="color: #ff6600;">FileStream：</span>

FileStream 类

公开以文件为主的 Stream，既支持同步读写操作，也支持异步读写操作。

命名空间:System.IO程序集:mscorlib（在 mscorlib.dll 中）

使用 FileStream 类对文件系统上的文件进行读取、写入、打开和关闭操作，并对其他与文件相关的操作系统句柄进行操作，如管道、标准输入和标准输出。读写操作可以指定为同步或异步操作。FileStream 对输入输出进行缓冲，从而提高性能。FileStream 对象支持使用 Seek 方法对文件进行随机访问。Seek 允许将读取/写入位置移动到文件中的任意位置。这是通过字节偏移参考点参数完成的。字节偏移量是相对于查找参考点而言的，该参考点可以是基础文件的开始、当前位置或结尾，分别由 SeekOrigin 类的三个属性表示。

<span style="color: #ff6600;"><a href="http://msdn.microsoft.com/zh-cn/library/system.io.filestream(VS.80).aspx" target="_blank"><span style="color: #ff6600;">更多(带老子去MSDN)</span></a></span>

<img class="aligncenter size-full wp-image-865" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/11/20111110141751.jpg" alt="" width="407" height="308" />

&nbsp;

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">01</span> <span style="color: #696969;">/*</span><br /> <span style="color: #696969;">02</span> <span style="color: #696969;"> * 由SharpDevelop创建。</span><br /> <span style="color: #696969;">03</span> <span style="color: #696969;"> * 用户： Flowerowl</span><br /> <span style="color: #696969;">04</span> <span style="color: #696969;"> * 日期: 2011/11/10</span><br /> <span style="color: #f810b0;">05</span> <span style="color: #696969;"> * 时间: 13:10</span><br /> <span style="color: #696969;">06</span> <span style="color: #696969;"> * </span><br /> <span style="color: #696969;">07</span> <span style="color: #696969;"> * 要改变这种模板请点击 工具|选项|代码编写|编辑标准头文件</span><br /> <span style="color: #696969;">08</span> <span style="color: #696969;"> */</span><br /> <span style="color: #696969;">09</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System</span>;<br /> <span style="color: #f810b0;">10</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Collections.Generic</span>;<br /> <span style="color: #696969;">11</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Drawing</span>;<br /> <span style="color: #696969;">12</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Windows.Forms</span>;<br /> <span style="color: #696969;">13</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.IO</span>;<br /> <span style="color: #696969;">14</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Data</span>;<br /> <span style="color: #f810b0;">15</span> <span style="color: #ff4400; font-weight: bold;">namespace</span> <span style="color: #c0c0c0;">Lazy38_</span><span style="color: #c0c0c0;">创建文本</span><span style="color: #c0c0c0;">_</span><span style="color: #c0c0c0;">输入内容</span><br /> <span style="color: #696969;">16</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">17</span><br /> <span style="color: #696969;">18</span>     <span style="color: #ff4400; font-weight: bold;">public</span> <span style="color: #ff4400; font-weight: bold;">partial</span> <span style="color: #ff4400; font-weight: bold;">class</span> <span style="color: #c0c0c0;">MainForm</span> <span style="color: #c0c0c0;">:</span> <span style="color: #c0c0c0;">Form</span><br /> <span style="color: #696969;">19</span>     <span style="color: #c0c0c0;">{</span><br /> <span style="color: #f810b0;">20</span>         <span style="color: #ff4400; font-weight: bold;">public</span> <span style="color: #ffff00;">MainForm</span>()<br /> <span style="color: #696969;">21</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">22</span><br /> <span style="color: #696969;">23</span>             <span style="color: #c0c0c0;">InitializeComponent</span>();<br /> <span style="color: #696969;">24</span><br /> <span style="color: #f810b0;">25</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">26</span><br /> <span style="color: #696969;">27</span>         <span style="color: #ff4400; font-weight: bold;">void</span> <span style="color: #ffff00;">Button1Click</span>(<span style="color: #ffffff;">object</span> <span style="color: #c0c0c0;">sender</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">EventArgs</span> <span style="color: #c0c0c0;">e</span>)<br /> <span style="color: #696969;">28</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">29</span>             <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">textBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Text</span><span style="color: #c0c0c0;">==</span><span style="color: #d13800;">&#8220;&#8221;</span>)<br /> <span style="color: #f810b0;">30</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">31</span>                 <span style="color: #c0c0c0;">MessageBox</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Show</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;文件名称不能为空~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;提示~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxButtons</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">OK</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxIcon</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Information</span>);<br /> <span style="color: #696969;">32</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">33</span>             <span style="color: #ff4400; font-weight: bold;">else</span> <span style="color: #ffff00;">if</span>(<span style="color: #c0c0c0;">File</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Exists</span>(<span style="color: #c0c0c0;">Application</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">StartupPath</span><span style="color: #c0c0c0;">+</span><span style="color: #d13800;">&#8220;\\&#8221;</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">textBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Text</span>))<br /> <span style="color: #696969;">34</span>                 <span style="color: #696969;">//确定指定的文件是否存在。</span><br /> <span style="color: #f810b0;">35</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">36</span>                 <span style="color: #c0c0c0;">MessageBox</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Show</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;该文件已经存在啦~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;提示~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxButtons</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">OK</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxIcon</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Information</span>);<br /> <span style="color: #696969;">37</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">38</span>             <span style="color: #ff4400; font-weight: bold;">else</span><br /> <span style="color: #696969;">39</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #f810b0;">40</span>                 <span style="color: #c0c0c0;">FileStream</span> <span style="color: #c0c0c0;">Lazy_fs</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">File</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Create</span>(<span style="color: #c0c0c0;">Application</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">StartupPath</span><span style="color: #c0c0c0;">+</span><span style="color: #d13800;">&#8220;\\&#8221;</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">textBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Text</span>);<br /> <span style="color: #696969;">41</span>                 <span style="color: #696969;">//在指定路径中创建文件。</span><br /> <span style="color: #696969;">42</span>                 <span style="color: #c0c0c0;">Lazy_fs</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Close</span>();<br /> <span style="color: #696969;">43</span>                 <span style="color: #696969;">//1、关闭流释放托管内存，使垃圾回收器可以释放对应的内存块。</span><br /> <span style="color: #696969;">44</span>                 <span style="color: #696969;">//2、在执行close方法后数据才可以真正的写入磁盘文件。</span><br /> <span style="color: #f810b0;">45</span>                 <span style="color: #c0c0c0;">MessageBox</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Show</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;成功创建文件~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;提示~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxButtons</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">OK</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxIcon</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Information</span>);<br /> <span style="color: #696969;">46</span><br /> <span style="color: #696969;">47</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">48</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">49</span><br /> <span style="color: #f810b0;">50</span>         <span style="color: #ff4400; font-weight: bold;">void</span> <span style="color: #ffff00;">Button2Click</span>(<span style="color: #ffffff;">object</span> <span style="color: #c0c0c0;">sender</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">EventArgs</span> <span style="color: #c0c0c0;">e</span>)<br /> <span style="color: #696969;">51</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">52</span>             <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">textBox2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Text</span><span style="color: #c0c0c0;">==</span><span style="color: #d13800;">&#8220;&#8221;</span>)<br /> <span style="color: #696969;">53</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">54</span>                 <span style="color: #c0c0c0;">MessageBox</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Show</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;文件名称不能为空哦~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;提示~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxButtons</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">OK</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxIcon</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Information</span>);<br /> <span style="color: #f810b0;">55</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">56</span>             <span style="color: #ff4400; font-weight: bold;">else</span><br /> <span style="color: #696969;">57</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">58</span>                 <span style="color: #c0c0c0;">StreamWriter</span> <span style="color: #c0c0c0;">Lazy_sw</span><span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">StreamWriter</span>(<span style="color: #c0c0c0;">Application</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">StartupPath</span><span style="color: #c0c0c0;">+</span><span style="color: #d13800;">&#8220;\\&#8221;</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">textBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Text</span>);<br /> <span style="color: #696969;">59</span>                 <span style="color: #c0c0c0;">Lazy_sw</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Write</span>(<span style="color: #c0c0c0;">textBox2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Text</span>);<br /> <span style="color: #f810b0;">60</span>                 <span style="color: #c0c0c0;">Lazy_sw</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Flush</span>();<br /> <span style="color: #696969;">61</span>                 <span style="color: #696969;">//清理当前编写器的所有缓冲区，并使所有缓冲数据写入基础流。</span><br /> <span style="color: #696969;">62</span>                 <span style="color: #696969;">//通过Flush，你可以控制何时把缓冲区的数据刷到底层设备上。</span><br /> <span style="color: #696969;">63</span>                 <span style="color: #696969;">//否则，只有缓冲区满的时候，以及Close的时候才会冲缓冲区。</span><br /> <span style="color: #696969;">64</span>                 <span style="color: #c0c0c0;">Lazy_sw</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Close</span>();<br /> <span style="color: #f810b0;">65</span>                 <span style="color: #696969;">//StreamWriter.Close()会调用StreamWriter.Dispose (true)</span><br /> <span style="color: #696969;">66</span>                 <span style="color: #696969;">//而Dispose (true)会释放托管和非托管资源。</span><br /> <span style="color: #696969;">67</span>                 <span style="color: #c0c0c0;">MessageBox</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Show</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;成功向文件写入内容~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;提示~&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxButtons</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">OK</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxIcon</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Information</span>);<br /> <span style="color: #696969;">68</span><br /> <span style="color: #696969;">69</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #f810b0;">70</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">71</span>     <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">72</span> <span style="color: #c0c0c0;">}</span>
</div>

<span style="color: #ff6600;"><a href="http://down.qiannao.com/space/file/flowerowl/-4e0a-4f20-5206-4eab/Lazy38_-521b-5efa-6587-672c_-8f93-5165-5185-5bb9.rar/.page" target="_blank"><span style="color: #ff6600;">下载源码</span></a></span>

转载请注明：[于哲的博客][1] &raquo; [C#每天抄一点(38):创建文本+输入内容][2]

 [1]: http://localhost/wordpress
 [2]: http://localhost/wordpress/864.html