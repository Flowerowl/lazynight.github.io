---
title: Qt学习笔记(3)：鼠标键盘事件
author: Flowerowl
layout: post
permalink: /583.html
duoshuo_thread_id:
  - 1266866
views:
  - 1551
bot_views:
  - 2
categories:
  - 代码
tags:
  - Qt
---
&nbsp;

<span style="color: #ff6600;">效果图：</span>

<img class="aligncenter size-full wp-image-584" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/10/20111021135110.jpg" alt="" width="372" height="316" />

<span style="color: #ff6600;"> MainWindow.h</span>

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">01</span> <span style="color: #ffffff;">#ifndef MAINWINDOW_H</span><br /> <span style="color: #696969;">02</span> <span style="color: #ffffff;">#define MAINWINDOW_H</span><br /> <span style="color: #696969;">03</span><br /> <span style="color: #696969;">04</span> <span style="color: #ffffff;">#include <QMainWindow></span><br /> <span style="color: #f810b0;">05</span> <span style="color: #ffffff;">#include <QtGui></span><br /> <span style="color: #696969;">06</span> <span style="color: #ff4400; font-weight: bold;">namespace</span> <span style="color: #c0c0c0;">Ui</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">07</span>     <span style="color: #ff4400; font-weight: bold;">class</span> <span style="color: #c0c0c0;">MainWindow</span>;<br /> <span style="color: #696969;">08</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">09</span><br /> <span style="color: #f810b0;">10</span> <span style="color: #ff4400; font-weight: bold;">class</span> <span style="color: #c0c0c0;">MainWindow</span> <span style="color: #c0c0c0;">:</span> <span style="color: #ff4400; font-weight: bold;">public</span> <span style="color: #c0c0c0;">QMainWindow</span><br /> <span style="color: #696969;">11</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">12</span>     <span style="color: #c0c0c0;">Q_OBJECT</span><br /> <span style="color: #696969;">13</span><br /> <span style="color: #696969;">14</span> <span style="color: #ff4400; font-weight: bold;">public</span><span style="color: #c0c0c0;">:</span><br /> <span style="color: #f810b0;">15</span>     <span style="color: #ff4400; font-weight: bold;">explicit</span> <span style="color: #c0c0c0;">MainWindow</span>(<span style="color: #c0c0c0;">QWidget</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">parent</span> <span style="color: #c0c0c0;">=</span> <span style="color: #c0c0c0;"></span>);<br /> <span style="color: #696969;">16</span>     <span style="color: #c0c0c0;">~</span><span style="color: #c0c0c0;">MainWindow</span>();<br /> <span style="color: #696969;">17</span>     <span style="color: #ffffff;">void</span> <span style="color: #c0c0c0;">mouseMoveEvent</span>(<span style="color: #c0c0c0;">QMouseEvent</span> <span style="color: #c0c0c0;">*</span>);<br /> <span style="color: #696969;">18</span>     <span style="color: #ffffff;">void</span> <span style="color: #c0c0c0;">keyPressEvent</span>(<span style="color: #c0c0c0;">QKeyEvent</span> <span style="color: #c0c0c0;">*</span>);<br /> <span style="color: #696969;">19</span><br /> <span style="color: #f810b0;">20</span> <span style="color: #ff4400; font-weight: bold;">private</span><span style="color: #c0c0c0;">:</span><br /> <span style="color: #696969;">21</span>     <span style="color: #c0c0c0;">Ui</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">MainWindow</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">ui</span>;<br /> <span style="color: #696969;">22</span> <span style="color: #c0c0c0;">};</span><br /> <span style="color: #696969;">23</span><br /> <span style="color: #696969;">24</span> <span style="color: #ffffff;">#endif </span><span style="color: #696969;">// MAINWINDOW_H</span>
</div>

&nbsp;

<span style="color: #ff6600;">MainWindow.cpp</span>

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">01</span> <span style="color: #ffffff;">#include &#8220;mainwindow.h&#8221;</span><br /> <span style="color: #696969;">02</span> <span style="color: #ffffff;">#include &#8220;ui_mainwindow.h&#8221;</span><br /> <span style="color: #696969;">03</span><br /> <span style="color: #696969;">04</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">MainWindow</span>(<span style="color: #c0c0c0;">QWidget</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">parent</span>) <span style="color: #c0c0c0;">:</span><br /> <span style="color: #f810b0;">05</span>     <span style="color: #c0c0c0;">QMainWindow</span>(<span style="color: #c0c0c0;">parent</span><span style="color: #c0c0c0;">),</span><br /> <span style="color: #696969;">06</span>     <span style="color: #c0c0c0;">ui</span>(<span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Ui</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">MainWindow</span>)<br /> <span style="color: #696969;">07</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">08</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setupUi</span>(<span style="color: #ff4400; font-weight: bold;">this</span>);<br /> <span style="color: #696969;">09</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">label</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setText</span>(<span style="color: #c0c0c0;">tr</span>(<span style="color: #d13800;">&#8220;Click A~~&#8221;</span>));<br /> <span style="color: #f810b0;">10</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">pushButton</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setText</span>(<span style="color: #c0c0c0;">tr</span>(<span style="color: #d13800;">&#8220;Click the mouse and move it ~&#8221;</span>));<br /> <span style="color: #696969;">11</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">12</span><br /> <span style="color: #696969;">13</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::~</span><span style="color: #c0c0c0;">MainWindow</span>()<br /> <span style="color: #696969;">14</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #f810b0;">15</span>     <span style="color: #ff4400; font-weight: bold;">delete</span> <span style="color: #c0c0c0;">ui</span>;<br /> <span style="color: #696969;">16</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">17</span> <span style="color: #ffffff;">void</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">mouseMoveEvent</span>(<span style="color: #c0c0c0;">QMouseEvent</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">m</span>)<br /> <span style="color: #696969;">18</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">19</span>     <span style="color: #696969;">//这里的函数名和参数不能更改</span><br /> <span style="color: #f810b0;">20</span>     <span style="color: #c0c0c0;">QCursor</span> <span style="color: #c0c0c0;">Lazy_pic</span>(<span style="color: #c0c0c0;">QPixmap</span>(<span style="color: #d13800;">&#8220;S:/event/jay.jpg&#8221;</span>));<br /> <span style="color: #696969;">21</span>     <span style="color: #696969;">//为鼠标指针选择图片，注意这里如果用绝对路径，要用/而不能用\</span><br /> <span style="color: #696969;">22</span> <span style="color: #696969;">    //也可以将图片放到工程文件夹的debug文件夹下，这样用相对路径\就可以了。</span><br /> <span style="color: #696969;">23</span>     <span style="color: #c0c0c0;">QApplication</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">setOverrideCursor</span>(<span style="color: #c0c0c0;">Lazy_pic</span>);<br /> <span style="color: #696969;">24</span>     <span style="color: #696969;">//将鼠标指针更改为自己设置的图片</span><br /> <span style="color: #f810b0;">25</span>     <span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">x</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">m</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">pos</span><span style="color: #c0c0c0;">().</span><span style="color: #c0c0c0;">x</span>();<br /> <span style="color: #696969;">26</span>     <span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">y</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">m</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">pos</span><span style="color: #c0c0c0;">().</span><span style="color: #c0c0c0;">y</span>();<br /> <span style="color: #696969;">27</span>     <span style="color: #696969;">// 获取鼠标现在的位置</span><br /> <span style="color: #696969;">28</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">pushButton</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setText</span>(<span style="color: #c0c0c0;">tr</span>(<span style="color: #d13800;">&#8220;鼠标现在的坐标是(%1,%2),爽吧?&#8221;</span><span style="color: #c0c0c0;">).</span><span style="color: #c0c0c0;">arg</span>(<span style="color: #c0c0c0;">x</span><span style="color: #c0c0c0;">).</span><span style="color: #c0c0c0;">arg</span>(<span style="color: #c0c0c0;">y</span>));<br /> <span style="color: #696969;">29</span>     <span style="color: #696969;">//将鼠标的位置坐标显示在按钮上</span><br /> <span style="color: #f810b0;">30</span>     <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">pushButton</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">move</span>(<span style="color: #c0c0c0;">m</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">pos</span>());<br /> <span style="color: #696969;">31</span>     <span style="color: #696969;">// 让按钮跟随鼠标移动</span><br /> <span style="color: #696969;">32</span> <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">33</span> <span style="color: #ffffff;">void</span> <span style="color: #c0c0c0;">MainWindow</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">keyPressEvent</span>(<span style="color: #c0c0c0;">QKeyEvent</span> <span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">k</span>)<br /> <span style="color: #696969;">34</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #f810b0;">35</span>     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">k</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">key</span>()<span style="color: #c0c0c0;">==</span><span style="color: #c0c0c0;">Qt</span><span style="color: #c0c0c0;">::</span><span style="color: #c0c0c0;">Key_A</span>)<br /> <span style="color: #696969;">36</span>     <span style="color: #696969;">//判断是否是A键按下</span><br /> <span style="color: #696969;">37</span>     <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">38</span>         <span style="color: #c0c0c0;">ui</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">label</span><span style="color: #c0c0c0;">-></span><span style="color: #c0c0c0;">setPixmap</span>(<span style="color: #c0c0c0;">QPixmap</span>(<span style="color: #d13800;">&#8220;S:/event/jay.jpg&#8221;</span>));<br /> <span style="color: #696969;">39</span>     <span style="color: #c0c0c0;">}</span><br /> <span style="color: #f810b0;">40</span> <span style="color: #c0c0c0;">}</span>
</div>

<span style="color: #ff6600;"><a href="http://down.qiannao.com/space/file/flowerowl/-4e0a-4f20-5206-4eab/Lazy3_event.rar/.page" target="_blank"><span style="color: #ff6600;">下载源码</span></a></span>

转载请注明：[于哲的博客][1] &raquo; [Qt学习笔记(3)：鼠标键盘事件][2]

 [1]: http://localhost/wordpress
 [2]: http://localhost/wordpress/583.html