---
title: 【Python】PEP8
author: Flowerowl
layout: post
permalink: /2976.html
views:
  - 618
duoshuo_thread_id:
  - 1220743779864322486
bot_views:
  - 1
categories:
  - 开发文档
tags:
  - pep8
  - python
  - 编码规范
---
<div id="contentT">
  <div id="breadcrumb">
    <a href="/dev/peps/">PEP Index</a><br /> <span class="breadcrumb-separator">></span>PEP 8 &#8212; Style Guide for Python Code
  </div>
  
  <p>
    <!-- This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE! -->
  </p>
  
  <table class="rfc2822 docutils field-list" frame="void" rules="none">
    <colgroup> <col class="field-name" /> <col class="field-body" /> </colgroup> <tr class="field">
      <th class="field-name">
        PEP:
      </th>
      
      <td class="field-body">
        8
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Title:
      </th>
      
      <td class="field-body">
        Style Guide for Python Code
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Version:
      </th>
      
      <td class="field-body">
        70b79ccd671a
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Last-Modified:
      </th>
      
      <td class="field-body">
        <a class="reference external" href="http://hg.python.org/peps/file/tip/pep-0008.txt">2013-08-02 08:13:25 -0700 (Fri, 02 Aug 2013)</a>
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Author:
      </th>
      
      <td class="field-body">
        Guido van Rossum <guido at python.org>,<br /> Barry Warsaw <barry at python.org>,<br /> Nick Coghlan <ncoghlan at gmail.com>
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Status:
      </th>
      
      <td class="field-body">
        Active
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Type:
      </th>
      
      <td class="field-body">
        Process
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Content-Type:
      </th>
      
      <td class="field-body">
        <a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a>
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Created:
      </th>
      
      <td class="field-body">
        05-Jul-2001
      </td>
    </tr>
    
    <tr class="field">
      <th class="field-name">
        Post-History:
      </th>
      
      <td class="field-body">
        05-Jul-2001, 01-Aug-2013
      </td>
    </tr>
  </table>
  
  <hr />
  
  <div class="contents topic" id="contents">
    <p class="topic-title first">
      Contents
    </p>
    
    <ul class="simple">
      <li>
        <a class="reference internal" id="id8" href="#introduction">Introduction</a>
      </li>
      <li>
        <a class="reference internal" id="id9" href="#a-foolish-consistency-is-the-hobgoblin-of-little-minds">A Foolish Consistency is the Hobgoblin of Little Minds</a>
      </li>
      <li>
        <a class="reference internal" id="id10" href="#code-lay-out">Code lay-out</a> <ul>
          <li>
            <a class="reference internal" id="id11" href="#indentation">Indentation</a>
          </li>
          <li>
            <a class="reference internal" id="id12" href="#tabs-or-spaces">Tabs or Spaces?</a>
          </li>
          <li>
            <a class="reference internal" id="id13" href="#maximum-line-length">Maximum Line Length</a>
          </li>
          <li>
            <a class="reference internal" id="id14" href="#blank-lines">Blank Lines</a>
          </li>
          <li>
            <a class="reference internal" id="id15" href="#source-file-encoding">Source File Encoding</a>
          </li>
          <li>
            <a class="reference internal" id="id16" href="#imports">Imports</a>
          </li>
        </ul>
      </li>
      
      <li>
        <a class="reference internal" id="id17" href="#whitespace-in-expressions-and-statements">Whitespace in Expressions and Statements</a> <ul>
          <li>
            <a class="reference internal" id="id18" href="#pet-peeves">Pet Peeves</a>
          </li>
          <li>
            <a class="reference internal" id="id19" href="#other-recommendations">Other Recommendations</a>
          </li>
        </ul>
      </li>
      
      <li>
        <a class="reference internal" id="id20" href="#comments">Comments</a> <ul>
          <li>
            <a class="reference internal" id="id21" href="#block-comments">Block Comments</a>
          </li>
          <li>
            <a class="reference internal" id="id22" href="#inline-comments">Inline Comments</a>
          </li>
          <li>
            <a class="reference internal" id="id23" href="#documentation-strings">Documentation Strings</a>
          </li>
        </ul>
      </li>
      
      <li>
        <a class="reference internal" id="id24" href="#version-bookkeeping">Version Bookkeeping</a>
      </li>
      <li>
        <a class="reference internal" id="id25" href="#naming-conventions">Naming Conventions</a> <ul>
          <li>
            <a class="reference internal" id="id26" href="#descriptive-naming-styles">Descriptive: Naming Styles</a>
          </li>
          <li>
            <a class="reference internal" id="id27" href="#prescriptive-naming-conventions">Prescriptive: Naming Conventions</a> <ul>
              <li>
                <a class="reference internal" id="id28" href="#names-to-avoid">Names to Avoid</a>
              </li>
              <li>
                <a class="reference internal" id="id29" href="#package-and-module-names">Package and Module Names</a>
              </li>
              <li>
                <a class="reference internal" id="id30" href="#class-names">Class Names</a>
              </li>
              <li>
                <a class="reference internal" id="id31" href="#exception-names">Exception Names</a>
              </li>
              <li>
                <a class="reference internal" id="id32" href="#global-variable-names">Global Variable Names</a>
              </li>
              <li>
                <a class="reference internal" id="id33" href="#function-names">Function Names</a>
              </li>
              <li>
                <a class="reference internal" id="id34" href="#function-and-method-arguments">Function and method arguments</a>
              </li>
              <li>
                <a class="reference internal" id="id35" href="#method-names-and-instance-variables">Method Names and Instance Variables</a>
              </li>
              <li>
                <a class="reference internal" id="id36" href="#constants">Constants</a>
              </li>
              <li>
                <a class="reference internal" id="id37" href="#designing-for-inheritance">Designing for inheritance</a>
              </li>
            </ul>
          </li>
          
          <li>
            <a class="reference internal" id="id38" href="#public-and-internal-interfaces">Public and internal interfaces</a>
          </li>
        </ul>
      </li>
      
      <li>
        <a class="reference internal" id="id39" href="#programming-recommendations">Programming Recommendations</a>
      </li>
      <li>
        <a class="reference internal" id="id40" href="#references">References</a>
      </li>
      <li>
        <a class="reference internal" id="id41" href="#copyright">Copyright</a>
      </li>
    </ul>
  </div>
  
  <div class="section" id="introduction">
    <h1>
      <a class="toc-backref" href="#id8">Introduction</a>
    </h1>
    
    <p>
      This document gives coding <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">conventions</span> for the Python code comprising the standard library in the main Python distribution. Please see the companion informational PEP describing style guidelines for the C code in the C implementation of Python <a class="footnote-reference" id="id1" href="#id4">[1]</a>.
    </p>
    
    <p>
      This document and <a class="reference external" href="/dev/peps/pep-0257">PEP 257</a> (Docstring Conventions) were adapted from<br /> Guido&#8217;s original Python Style Guide essay, with some additions from<br /> Barry&#8217;s style guide <a class="footnote-reference" id="id2" href="#id5">[2]</a>.
    </p>
    
    <p>
      This style guide evolves over time as additional conventions are<br /> identified and past conventions are rendered obsolete by changes in<br /> the language itself.
    </p>
    
    <p>
      Many projects have their own coding style guidelines. In the event of any<br /> conflicts, such project-specific guides take precedence for that project.
    </p>
  </div>
  
  <div class="section" id="a-foolish-consistency-is-the-hobgoblin-of-little-minds">
    <h1>
      <a class="toc-backref" href="#id9">A Foolish Consistency is the Hobgoblin of Little Minds</a>
    </h1>
    
    <p>
      One of Guido&#8217;s key insights is that code is read much more often than<br /> it is written. The guidelines provided here are intended to improve<br /> the readability of code and make it consistent across the wide<br /> spectrum of Python code. As <a class="reference external" href="/dev/peps/pep-0020">PEP 20</a> says, &#8220;Readability counts&#8221;.
    </p>
    
    <p>
      A style guide is about <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">consistency</span>. Consistency with this style guide is important. Consistency within a project is more important. Consistency within one module or function is most important.
    </p>
    
    <p>
      But most importantly: know when to be inconsistent &#8212; sometimes the<br /> style guide just doesn&#8217;t apply. When in doubt, use your best<br /> judgment. Look at other examples and decide what looks best. And<br /> don&#8217;t hesitate to ask!
    </p>
    
    <p>
      In particular: do not break backwards compatibility just to comply with<br /> this PEP!
    </p>
    
    <p>
      Some other good reasons to ignore a particular guideline:
    </p>
    
    <ol class="arabic simple">
      <li>
        When applying the guideline would make the code less readable, even<br /> for someone who is used to reading code that follows this PEP.
      </li>
      <li>
        To be consistent with surrounding code that also breaks it (maybe<br /> for historic reasons) &#8212; although this is also an opportunity to<br /> clean up someone else&#8217;s mess (in true XP style).
      </li>
      <li>
        Because the code in question predates the introduction of the<br /> guideline and there is no other reason to be modifying that code.
      </li>
      <li>
        When the code needs to remain compatible with older versions of<br /> Python that don&#8217;t support the feature recommended by the style guide.
      </li>
    </ol>
  </div>
  
  <div class="section" id="code-lay-out">
    <h1>
      <a class="toc-backref" href="#id10">Code lay-out</a>
    </h1>
    
    <div class="section" id="indentation">
      <h2>
        <a class="toc-backref" href="#id11">Indentation</a>
      </h2>
      
      <p>
        Use 4 <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">spaces</span> per indentation level.
      </p>
      
      <p>
        Continuation lines should align wrapped elements either vertically<br /> using Python&#8217;s implicit line joining inside parentheses, brackets and<br /> braces, or using a hanging indent. When using a hanging indent the<br /> following considerations should be applied; there should be no<br /> arguments on the first line and further indentation should be used to<br /> clearly distinguish itself as a continuation line.
      </p>
      
      <p>
        Yes:
      </p>
      
      <pre class="literal-block"># Aligned with opening delimiter
foo = long_function_name(var_one, var_two,
                         var_three, var_four)

# More indentation included to distinguish this from the rest.
def long_function_name(
        var_one, var_two, var_three,
        var_four):
    print(var_one)</pre>
      
      <p>
        No:
      </p>
      
      <pre class="literal-block"># Arguments on first line forbidden when not using vertical alignment
foo = long_function_name(var_one, var_two,
    var_three, var_four)

# Further indentation required as indentation is not distinguishable
def long_function_name(
    var_one, var_two, var_three,
    var_four):
    print(var_one)</pre>
      
      <p>
        Optional:
      </p>
      
      <pre class="literal-block"># Extra indentation is not necessary.
foo = long_function_name(
  var_one, var_two,
  var_three, var_four)</pre>
      
      <p>
        The closing brace/bracket/parenthesis on multi-line constructs may<br /> either line up under the first non-whitespace character of the last<br /> line of list, as in:
      </p>
      
      <pre class="literal-block">my_list = [
    1, 2, 3,
    4, 5, 6,
    ]
result = some_function_that_takes_arguments(
    'a', 'b', 'c',
    'd', 'e', 'f',
    )</pre>
      
      <p>
        or it may be lined up under the first character of the line that<br /> starts the multi-line construct, as in:
      </p>
      
      <pre class="literal-block">my_list = [
    1, 2, 3,
    4, 5, 6,
]
result = some_function_that_takes_arguments(
    'a', 'b', 'c',
    'd', 'e', 'f',
)</pre>
    </div>
    
    <div class="section" id="tabs-or-spaces">
      <h2>
        <a class="toc-backref" href="#id12">Tabs or Spaces?</a>
      </h2>
      
      <p>
        Spaces are the preferred indentation method.
      </p>
      
      <p>
        Tabs should be used solely to remain consistent with code that is<br /> already indented with tabs.
      </p>
      
      <p>
        Python 3 disallows mixing the use of tabs and spaces for indentation.
      </p>
      
      <p>
        Python 2 code indented with a mixture of tabs and spaces should be<br /> converted to using spaces exclusively.
      </p>
      
      <p>
        When invoking the Python 2 command line interpreter with<br /> the <tt class="docutils literal"><span class="pre">-t</span></tt> option, it issues warnings about code that illegally mixes<br /> tabs and spaces. When using <tt class="docutils literal"><span class="pre">-tt</span></tt> these warnings become errors.<br /> These options are highly recommended!
      </p>
    </div>
    
    <div class="section" id="maximum-line-length">
      <h2>
        <a class="toc-backref" href="#id13">Maximum Line Length</a>
      </h2>
      
      <p>
        Limit all lines to a maximum of 79 characters.
      </p>
      
      <p>
        For flowing long blocks of text with fewer <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">structural restrictions</span> (docstrings or comments), the line length should be limited to 72 characters.
      </p>
      
      <p>
        Limiting the required editor window width makes it possible to have<br /> several files open side-by-side, and works well when using code<br /> review tools that present the two versions in adjacent columns.
      </p>
      
      <p>
        The default wrapping in most tools disrupts the visual structure of the<br /> code, making it more difficult to understand. The limits are chosen to<br /> avoid wrapping in editors with the window width set to 80, even<br /> if the tool places a marker glyph in the final column when wrapping<br /> lines. Some web based tools may not offer dynamic line wrapping at all.
      </p>
      
      <p>
        Some teams strongly prefer a longer line length. For code maintained<br /> exclusively or primarily by a team that can reach agreement on this<br /> issue, it is okay to increase the nominal line length from 80 to<br /> 100 characters (effectively increasing the maximum length to 99<br /> characters), provided that comments and docstrings are still wrapped<br /> at 72 characters.
      </p>
      
      <p>
        The Python standard library is conservative and requires limiting<br /> lines to 79 characters (and docstrings/comments to 72).
      </p>
      
      <p>
        The preferred way of wrapping long lines is by using Python&#8217;s implied<br /> line continuation inside parentheses, brackets and braces. Long lines<br /> can be broken over multiple lines by wrapping expressions in<br /> parentheses. These should be used in preference to using a backslash<br /> for line continuation.
      </p>
      
      <p>
        Backslashes may still be appropriate at times. For example, long,<br /> multiple <tt class="docutils literal">with</tt>-statements cannot use implicit continuation, so<br /> backslashes are acceptable:
      </p>
      
      <pre class="literal-block">with open('/path/to/some/file/you/want/to/read') as file_1, \
        open('/path/to/some/file/being/written', 'w') as file_2:
    file_2.write(file_1.read())</pre>
      
      <p>
        Another such case is with <tt class="docutils literal">assert</tt> statements.
      </p>
      
      <p>
        Make sure to indent the continued line appropriately. The preferred<br /> place to break around a binary operator is <em>after</em> the operator, not<br /> before it. Some examples:
      </p>
      
      <pre class="literal-block">class Rectangle(Blob):

    def __init__(self, width, height,
                 color='black', emphasis=None, highlight=0):
        if (width == 0 and height == 0 and
                color == 'red' and emphasis == 'strong' or
                highlight &gt; 100):
            raise ValueError("sorry, you lose")
        if width == 0 and height == 0 and (color == 'red' or
                                           emphasis is None):
            raise ValueError("I don't think so -- values are %s, %s" %
                             (width, height))
        Blob.__init__(self, width, height,
                      color, emphasis, highlight)</pre>
    </div>
    
    <div class="section" id="blank-lines">
      <h2>
        <a class="toc-backref" href="#id14">Blank Lines</a>
      </h2>
      
      <p>
        Separate top-level function and class definitions with two blank<br /> lines.
      </p>
      
      <p>
        Method definitions inside a class are separated by a single blank<br /> line.
      </p>
      
      <p>
        Extra blank lines may be used (sparingly) to separate groups of<br /> related functions. Blank lines may be omitted between a bunch of<br /> related one-liners (e.g. a set of dummy implementations).
      </p>
      
      <p>
        Use blank lines in functions, sparingly, to indicate logical sections.
      </p>
      
      <p>
        Python accepts the control-L (i.e. ^L) form feed character as<br /> whitespace; Many tools treat these characters as page separators, so<br /> you may use them to separate pages of related sections of your file.<br /> Note, some editors and web-based code viewers may not recognize<br /> control-L as a form feed and will show another glyph in its place.
      </p>
    </div>
    
    <div class="section" id="source-file-encoding">
      <h2>
        <a class="toc-backref" href="#id15">Source File Encoding</a>
      </h2>
      
      <p>
        Code in the core Python distribution should always use UTF-8 (or ASCII<br /> in Python 2).
      </p>
      
      <p>
        Files using ASCII (in Python 2) or UTF-8 (in Python 3) should not have<br /> an encoding declaration.
      </p>
      
      <p>
        In the standard library, non-default encodings should be used only for<br /> test purposes or when a comment or docstring needs to mention an author<br /> name that contains non-ASCII characters; otherwise, using <tt class="docutils literal">\x</tt>,<br /> <tt class="docutils literal">\u</tt>, <tt class="docutils literal">\U</tt>, or <tt class="docutils literal">\N</tt> escapes is the preferred way to include<br /> non-ASCII data in string literals.
      </p>
      
      <p>
        For Python 3.0 and beyond, the following policy is prescribed for the<br /> standard library (see <a class="reference external" href="/dev/peps/pep-3131">PEP 3131</a>): All identifiers in the Python<br /> standard library MUST use ASCII-only identifiers, and SHOULD use<br /> English words wherever feasible (in many cases, abbreviations and<br /> technical terms are used which aren&#8217;t English). In addition, string<br /> literals and comments must also be in ASCII. The only exceptions are<br /> (a) test cases testing the non-ASCII features, and<br /> (b) names of authors. Authors whose names are not based on the<br /> latin alphabet MUST provide a latin transliteration of their<br /> names.
      </p>
      
      <p>
        Open source projects with a global audience are encouraged to adopt a<br /> similar policy.
      </p>
    </div>
    
    <div class="section" id="imports">
      <h2>
        <a class="toc-backref" href="#id16">Imports</a>
      </h2>
      
      <ul>
        <li>
          <p class="first">
            Imports should usually be on separate lines, e.g.:
          </p>
          
          <pre class="literal-block">Yes: import os
     import sys

No:  import sys, os</pre>
          
          <p>
            It&#8217;s okay to say this though:
          </p>
          
          <pre class="literal-block">from subprocess import Popen, PIPE</pre>
        </li>
        
        <li>
          <p class="first">
            Imports are always put at the top of the file, just after any module<br /> comments and docstrings, and before module globals and constants.
          </p>
          
          <p>
            Imports should be grouped in the following order:
          </p>
          
          <ol class="arabic simple">
            <li>
              standard library imports
            </li>
            <li>
              related third party imports
            </li>
            <li>
              local application/library specific imports
            </li>
          </ol>
          
          <p>
            You should put a blank line between each group of imports.
          </p>
          
          <p>
            Put any relevant <tt class="docutils literal">__all__</tt> specification after the imports.</li> <li>
              <p class="first">
                Absolute imports are recommended, as they are usually more readable<br /> and tend to be better behaved (or at least give better error<br /> messages) if the import system is incorrectly configured (such as<br /> when a directory inside a package ends up on <tt class="docutils literal">sys.path</tt>):
              </p>
              
              <pre class="literal-block">import mypkg.sibling
from mypkg import sibling
from mypkg.sibling import example</pre>
              
              <p>
                However, explicit relative imports are an acceptable alternative to<br /> absolute imports, especially when dealing with complex package layouts<br /> where using absolute imports would be unnecessarily verbose:
              </p>
              
              <pre class="literal-block">from . import sibling
from .sibling import example</pre>
              
              <p>
                Standard library code should avoid complex package layouts and always<br /> use absolute imports.
              </p>
              
              <p>
                Implicit relative imports should <em>never</em> be used and have been removed<br /> in Python 3.</li> <li>
                  <p class="first">
                    When importing a class from a class-containing module, it&#8217;s usually<br /> okay to spell this:
                  </p>
                  
                  <pre class="literal-block">from myclass import MyClass
from foo.bar.yourclass import YourClass</pre>
                  
                  <p>
                    If this spelling causes local name clashes, then spell them
                  </p>
                  
                  <pre class="literal-block">import myclass
import foo.bar.yourclass</pre>
                  
                  <p>
                    and use &#8220;myclass.MyClass&#8221; and &#8220;foo.bar.yourclass.YourClass&#8221;.</li> <li>
                      <p class="first">
                        Wildcard imports (<tt class="docutils literal">from <module> import *</tt>) should be avoided, as<br /> they make it unclear which names are present in the namespace,<br /> confusing both readers and many automated tools. There is one<br /> defensible use case for a wildcard import, which is to republish an<br /> internal interface as part of a public API (for example, overwriting<br /> a pure Python implementation of an interface with the definitions<br /> from an optional accelerator module and exactly which definitions<br /> will be overwritten isn&#8217;t known in advance).
                      </p>
                      
                      <p>
                        When republishing names this way, the guidelines below regarding<br /> public and internal interfaces still apply.</li> </ul> </div> </div> <div class="section" id="whitespace-in-expressions-and-statements">
                          <h1>
                            <a class="toc-backref" href="#id17">Whitespace in Expressions and Statements</a>
                          </h1>
                          
                          <div class="section" id="pet-peeves">
                            <h2>
                              <a class="toc-backref" href="#id18">Pet Peeves</a>
                            </h2>
                            
                            <p>
                              Avoid extraneous whitespace in the following situations:
                            </p>
                            
                            <ul>
                              <li>
                                <p class="first">
                                  Immediately inside parentheses, brackets or braces.
                                </p>
                                
                                <pre class="literal-block">Yes: spam(ham[1], {eggs: 2})
No:  spam( ham[ 1 ], { eggs: 2 } )</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  Immediately before a comma, semicolon, or colon:
                                </p>
                                
                                <pre class="literal-block">Yes: if x == 4: print x, y; x, y = y, x
No:  if x == 4 : print x , y ; x , y = y , x</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  Immediately before the open parenthesis that starts the argument<br /> list of a function call:
                                </p>
                                
                                <pre class="literal-block">Yes: spam(1)
No:  spam (1)</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  Immediately before the open parenthesis that starts an indexing or<br /> slicing:
                                </p>
                                
                                <pre class="literal-block">Yes: dict['key'] = list[index]
No:  dict ['key'] = list [index]</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  More than one space around an assignment (or other) operator to<br /> align it with another.
                                </p>
                                
                                <p>
                                  Yes:
                                </p>
                                
                                <pre class="literal-block">x = 1
y = 2
long_variable = 3</pre>
                                
                                <p>
                                  No:
                                </p>
                                
                                <pre class="literal-block">x             = 1
y             = 2
long_variable = 3</pre>
                              </li>
                            </ul>
                          </div>
                          
                          <div class="section" id="other-recommendations">
                            <h2>
                              <a class="toc-backref" href="#id19">Other Recommendations</a>
                            </h2>
                            
                            <ul>
                              <li>
                                <p class="first">
                                  Always surround these binary operators with a single space on either<br /> side: assignment (<tt class="docutils literal">=</tt>), augmented assignment (<tt class="docutils literal">+=</tt>, <tt class="docutils literal"><span class="pre">-=</span></tt><br /> etc.), comparisons (<tt class="docutils literal">==</tt>, <tt class="docutils literal"><</tt>, <tt class="docutils literal">></tt>, <tt class="docutils literal">!=</tt>, <tt class="docutils literal"><></tt>, <tt class="docutils literal"><=</tt>,<br /> <tt class="docutils literal">>=</tt>, <tt class="docutils literal">in</tt>, <tt class="docutils literal">not in</tt>, <tt class="docutils literal">is</tt>, <tt class="docutils literal">is not</tt>), Booleans (<tt class="docutils literal">and</tt>,<br /> <tt class="docutils literal">or</tt>, <tt class="docutils literal">not</tt>).
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  If operators with different priorities are used, consider adding<br /> whitespace around the operators with the lowest priority(ies). Use<br /> your own judgment; however, never use more than one space, and<br /> always have the same amount of whitespace on both sides of a binary<br /> operator.
                                </p>
                                
                                <p>
                                  Yes:
                                </p>
                                
                                <pre class="literal-block">i = i + 1
submitted += 1
x = x*2 - 1
hypot2 = x*x + y*y
c = (a+b) * (a-b)</pre>
                                
                                <p>
                                  No:
                                </p>
                                
                                <pre class="literal-block">i=i+1
submitted +=1
x = x * 2 - 1
hypot2 = x * x + y * y
c = (a + b) * (a - b)</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  Don&#8217;t use spaces around the <tt class="docutils literal">=</tt> sign when used to indicate a<br /> keyword argument or a default parameter value.
                                </p>
                                
                                <p>
                                  Yes:
                                </p>
                                
                                <pre class="literal-block">def complex(real, imag=0.0):
    return magic(r=real, i=imag)</pre>
                                
                                <p>
                                  No:
                                </p>
                                
                                <pre class="literal-block">def complex(real, imag = 0.0):
    return magic(r = real, i = imag)</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  Compound statements (multiple statements on the same line) are<br /> generally discouraged.
                                </p>
                                
                                <p>
                                  Yes:
                                </p>
                                
                                <pre class="literal-block">if foo == 'blah':
    do_blah_thing()
do_one()
do_two()
do_three()</pre>
                                
                                <p>
                                  Rather not:
                                </p>
                                
                                <pre class="literal-block">if foo == 'blah': do_blah_thing()
do_one(); do_two(); do_three()</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  While sometimes it&#8217;s okay to put an if/for/while with a small body<br /> on the same line, never do this for multi-clause statements. Also<br /> avoid folding such long lines!
                                </p>
                                
                                <p>
                                  Rather not:
                                </p>
                                
                                <pre class="literal-block">if foo == 'blah': do_blah_thing()
for x in lst: total += x
while t &lt; 10: t = delay()</pre>
                                
                                <p>
                                  Definitely not:
                                </p>
                                
                                <pre class="literal-block">if foo == 'blah': do_blah_thing()
else: do_non_blah_thing()

try: something()
finally: cleanup()

do_one(); do_two(); do_three(long, argument,
                             list, like, this)

if foo == 'blah': one(); two(); three()</pre>
                              </li>
                            </ul>
                          </div>
                        </div>
                        
                        <div class="section" id="comments">
                          <h1>
                            <a class="toc-backref" href="#id20">Comments</a>
                          </h1>
                          
                          <p>
                            Comments that contradict the code are worse than no comments. Always<br /> make a priority of keeping the comments up-to-date when the code<br /> changes!
                          </p>
                          
                          <p>
                            Comments should be complete sentences. If a comment is a phrase or<br /> sentence, its first word should be capitalized, unless it is an<br /> identifier that begins with a lower case letter (never alter the case<br /> of identifiers!).
                          </p>
                          
                          <p>
                            If a comment is short, the period at the end can be omitted. Block<br /> comments generally consist of one or more paragraphs built out of<br /> complete sentences, and each sentence should end in a period.
                          </p>
                          
                          <p>
                            You should use two spaces after a sentence-ending period.
                          </p>
                          
                          <p>
                            When writing English, Strunk and White apply.
                          </p>
                          
                          <p>
                            Python coders from non-English speaking countries: please write your<br /> comments in English, unless you are 120% sure that the code will never<br /> be read by people who don&#8217;t speak your language.
                          </p>
                          
                          <div class="section" id="block-comments">
                            <h2>
                              <a class="toc-backref" href="#id21">Block Comments</a>
                            </h2>
                            
                            <p>
                              Block comments generally apply to some (or all) code that follows<br /> them, and are indented to the same level as that code. Each line of a<br /> block comment starts with a <tt class="docutils literal">#</tt> and a single space (unless it is<br /> indented text inside the comment).
                            </p>
                            
                            <p>
                              Paragraphs inside a block comment are separated by a line containing a<br /> single <tt class="docutils literal">#</tt>.
                            </p>
                          </div>
                          
                          <div class="section" id="inline-comments">
                            <h2>
                              <a class="toc-backref" href="#id22">Inline Comments</a>
                            </h2>
                            
                            <p>
                              Use inline comments sparingly.
                            </p>
                            
                            <p>
                              An inline comment is a comment on the same line as a statement.<br /> Inline comments should be separated by at least two spaces from the<br /> statement. They should start with a # and a single space.
                            </p>
                            
                            <p>
                              Inline comments are unnecessary and in fact distracting if they state<br /> the obvious. Don&#8217;t do this:
                            </p>
                            
                            <pre class="literal-block">x = x + 1                 # Increment x</pre>
                            
                            <p>
                              But sometimes, this is useful:
                            </p>
                            
                            <pre class="literal-block">x = x + 1                 # Compensate for border</pre>
                          </div>
                          
                          <div class="section" id="documentation-strings">
                            <h2>
                              <a class="toc-backref" href="#id23">Documentation Strings</a>
                            </h2>
                            
                            <p>
                              Conventions for writing good documentation strings<br /> (a.k.a. &#8220;docstrings&#8221;) are immortalized in <a class="reference external" href="/dev/peps/pep-0257">PEP 257</a>.
                            </p>
                            
                            <ul>
                              <li>
                                <p class="first">
                                  Write docstrings for all public modules, functions, classes, and<br /> methods. Docstrings are not necessary for non-public methods, but<br /> you should have a comment that describes what the method does. This<br /> comment should appear after the <tt class="docutils literal">def</tt> line.
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <a class="reference external" href="/dev/peps/pep-0257">PEP 257</a> describes good docstring conventions. Note that most<br /> importantly, the <tt class="docutils literal">"""</tt> that ends a multiline docstring should be<br /> on a line by itself, and preferably preceded by a blank line, e.g.:
                                </p>
                                
                                <pre class="literal-block">"""Return a foobang

Optional plotz says to frobnicate the bizbaz first.

"""</pre>
                              </li>
                              
                              <li>
                                <p class="first">
                                  For one liner docstrings, it&#8217;s okay to keep the closing <tt class="docutils literal">"""</tt> on<br /> the same line.
                                </p>
                              </li>
                            </ul>
                          </div>
                        </div>
                        
                        <div class="section" id="version-bookkeeping">
                          <h1>
                            <a class="toc-backref" href="#id24">Version Bookkeeping</a>
                          </h1>
                          
                          <p>
                            If you have to have Subversion, CVS, or RCS crud in your source file,<br /> do it as follows.
                          </p>
                          
                          <pre class="literal-block">__version__ = "$Revision: 70b79ccd671a $"
# $Source$</pre>
                          
                          <p>
                            These lines should be included after the module&#8217;s docstring, before<br /> any other code, separated by a blank line above and below.
                          </p>
                        </div>
                        
                        <div class="section" id="naming-conventions">
                          <h1>
                            <a class="toc-backref" href="#id25">Naming Conventions</a>
                          </h1>
                          
                          <p>
                            The naming conventions of Python&#8217;s library are a bit of a mess, so<br /> we&#8217;ll never get this completely consistent &#8212; nevertheless, here are<br /> the currently recommended naming standards. New modules and packages<br /> (including third party frameworks) should be written to these<br /> standards, but where an existing library has a different style,<br /> internal consistency is preferred.
                          </p>
                          
                          <div class="section" id="descriptive-naming-styles">
                            <h2>
                              <a class="toc-backref" href="#id26">Descriptive: Naming Styles</a>
                            </h2>
                            
                            <p>
                              There are a lot of different naming <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">styles</span>. It helps to be able to recognize what naming style is being used, independently from what they are used for.
                            </p>
                            
                            <p>
                              The following naming styles are commonly distinguished:
                            </p>
                            
                            <ul>
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">b</tt> (single lowercase letter)
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">B</tt> (single uppercase letter)
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">lowercase</tt>
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">lower_case_with_underscores</tt>
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">UPPERCASE</tt>
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">UPPER_CASE_WITH_UNDERSCORES</tt>
                                </p>
                              </li>
                              
                              <li>
                                <p class="first">
                                  <tt class="docutils literal">CapitalizedWords</tt> (or CapWords, or CamelCase &#8212; so named because<br /> of the bumpy look of its letters <a class="footnote-reference" id="id3" href="#id6">[3]</a>). This is also sometimes known<br /> as StudlyCaps.
                                </p>
                                
                                <p>
                                  Note: When using abbreviations in CapWords, capitalize all the<br /> letters of the abbreviation. Thus HTTPServerError is better than<br /> HttpServerError.</li> <li>
                                    <p class="first">
                                      <tt class="docutils literal">mixedCase</tt> (differs from CapitalizedWords by initial lowercase<br /> character!)
                                    </p>
                                  </li>
                                  
                                  <li>
                                    <p class="first">
                                      <tt class="docutils literal">Capitalized_Words_With_Underscores</tt> (ugly!)
                                    </p>
                                  </li></ul> 
                                  
                                  <p>
                                    There&#8217;s also the style of using a short unique prefix to group related<br /> names together. This is not used much in Python, but it is mentioned<br /> for completeness. For example, the <tt class="docutils literal">os.stat()</tt> function returns a<br /> tuple whose items traditionally have names like <tt class="docutils literal">st_mode</tt>,<br /> <tt class="docutils literal">st_size</tt>, <tt class="docutils literal">st_mtime</tt> and so on. (This is done to emphasize the<br /> correspondence with the fields of the POSIX system call struct, which<br /> helps programmers familiar with that.)
                                  </p>
                                  
                                  <p>
                                    The X11 library uses a leading X for all its public functions. In Python, this style is generally deemed unnecessary because attribute and method names are prefixed with an object, and <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">function names</span> are prefixed with a module name.
                                  </p>
                                  
                                  <p>
                                    In addition, the following special forms using leading or trailing<br /> underscores are recognized (these can generally be combined with any<br /> case convention):
                                  </p>
                                  
                                  <ul>
                                    <li>
                                      <p class="first">
                                        <tt class="docutils literal">_single_leading_underscore</tt>: weak &#8220;internal use&#8221; indicator.<br /> E.g. <tt class="docutils literal">from M import *</tt> does not import objects whose name starts<br /> with an underscore.
                                      </p>
                                    </li>
                                    
                                    <li>
                                      <p class="first">
                                        <tt class="docutils literal">single_trailing_underscore_</tt>: used by convention to avoid<br /> conflicts with Python keyword, e.g.
                                      </p>
                                      
                                      <pre class="literal-block">Tkinter.Toplevel(master, class_='ClassName')</pre>
                                    </li>
                                    
                                    <li>
                                      <p class="first">
                                        <tt class="docutils literal">__double_leading_underscore</tt>: when naming a class attribute,<br /> invokes name mangling (inside class FooBar, <tt class="docutils literal">__boo</tt> becomes<br /> <tt class="docutils literal">_FooBar__boo</tt>; see below).
                                      </p>
                                    </li>
                                    
                                    <li>
                                      <p class="first">
                                        <tt class="docutils literal">__double_leading_and_trailing_underscore__</tt>: &#8220;magic&#8221; objects or<br /> attributes that live in user-controlled namespaces.<br /> E.g. <tt class="docutils literal">__init__</tt>, <tt class="docutils literal">__import__</tt> or <tt class="docutils literal">__file__</tt>. Never invent<br /> such names; only use them as documented.
                                      </p>
                                    </li>
                                  </ul></div> 
                                  
                                  <div class="section" id="prescriptive-naming-conventions">
                                    <h2>
                                      <a class="toc-backref" href="#id27">Prescriptive: Naming Conventions</a>
                                    </h2>
                                    
                                    <div class="section" id="names-to-avoid">
                                      <h3>
                                        <a class="toc-backref" href="#id28">Names to Avoid</a>
                                      </h3>
                                      
                                      <p>
                                        Never use the characters &#8216;l&#8217; (lowercase letter el), &#8216;O&#8217; (uppercase<br /> letter oh), or &#8216;I&#8217; (uppercase letter eye) as single character variable<br /> names.
                                      </p>
                                      
                                      <p>
                                        In some fonts, these characters are indistinguishable from the<br /> numerals one and zero. When tempted to use &#8216;l&#8217;, use &#8216;L&#8217; instead.
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="package-and-module-names">
                                      <h3>
                                        <a class="toc-backref" href="#id29">Package and Module Names</a>
                                      </h3>
                                      
                                      <p>
                                        Modules should have short, all-lowercase names. Underscores can be<br /> used in the module name if it improves readability. Python packages<br /> should also have short, all-lowercase names, although the use of<br /> underscores is discouraged.
                                      </p>
                                      
                                      <p>
                                        Since module names are mapped to file names, and some file systems are<br /> case insensitive and truncate long names, it is important that module<br /> names be chosen to be fairly short &#8212; this won&#8217;t be a problem on Unix,<br /> but it may be a problem when the code is transported to older Mac or<br /> Windows versions, or DOS.
                                      </p>
                                      
                                      <p>
                                        When an extension module written in C or C++ has an accompanying<br /> Python module that provides a higher level (e.g. more object oriented)<br /> interface, the C/C++ module has a leading underscore<br /> (e.g. <tt class="docutils literal">_socket</tt>).
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="class-names">
                                      <h3>
                                        <a class="toc-backref" href="#id30">Class Names</a>
                                      </h3>
                                      
                                      <p>
                                        Almost without exception, <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">class names</span> use the CapWords convention. Classes for internal use have a leading underscore in addition.
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="exception-names">
                                      <h3>
                                        <a class="toc-backref" href="#id31">Exception Names</a>
                                      </h3>
                                      
                                      <p>
                                        Because exceptions should be classes, the class naming convention<br /> applies here. However, you should use the suffix &#8220;Error&#8221; on your<br /> exception names (if the exception actually is an error).
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="global-variable-names">
                                      <h3>
                                        <a class="toc-backref" href="#id32">Global Variable Names</a>
                                      </h3>
                                      
                                      <p>
                                        (Let&#8217;s hope that these variables are meant for use inside one module<br /> only.) The conventions are about the same as those for functions.
                                      </p>
                                      
                                      <p>
                                        Modules that are designed for use via <tt class="docutils literal">from M import *</tt> should use<br /> the <tt class="docutils literal">__all__</tt> mechanism to prevent exporting globals, or use the<br /> older convention of prefixing such globals with an underscore (which<br /> you might want to do to indicate these globals are &#8220;module<br /> non-public&#8221;).
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="function-names">
                                      <h3>
                                        <a class="toc-backref" href="#id33">Function Names</a>
                                      </h3>
                                      
                                      <p>
                                        <span class="inline-bubble-link inline-link-active" style="display: inline; padding: 0px; margin: 0px;">Function</span> names should be lowercase, with words separated by underscores as necessary to improve readability.
                                      </p>
                                      
                                      <p>
                                        mixedCase is allowed only in contexts where that&#8217;s already the<br /> prevailing style (e.g. threading.py), to retain backwards<br /> compatibility.
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="function-and-method-arguments">
                                      <h3>
                                        <a class="toc-backref" href="#id34">Function and method arguments</a>
                                      </h3>
                                      
                                      <p>
                                        Always use <tt class="docutils literal">self</tt> for the first argument to instance methods.
                                      </p>
                                      
                                      <p>
                                        Always use <tt class="docutils literal">cls</tt> for the first argument to class methods.
                                      </p>
                                      
                                      <p>
                                        If a function argument&#8217;s name clashes with a reserved keyword, it is<br /> generally better to append a single trailing underscore rather than<br /> use an abbreviation or spelling corruption. Thus <tt class="docutils literal">class_</tt> is better<br /> than <tt class="docutils literal">clss</tt>. (Perhaps better is to avoid such clashes by using a<br /> synonym.)
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="method-names-and-instance-variables">
                                      <h3>
                                        <a class="toc-backref" href="#id35">Method Names and Instance Variables</a>
                                      </h3>
                                      
                                      <p>
                                        Use the function naming rules: lowercase with words separated by<br /> underscores as necessary to improve readability.
                                      </p>
                                      
                                      <p>
                                        Use one leading underscore only for non-public methods and instance<br /> variables.
                                      </p>
                                      
                                      <p>
                                        To avoid name clashes with subclasses, use two leading underscores to<br /> invoke Python&#8217;s name mangling rules.
                                      </p>
                                      
                                      <p>
                                        Python mangles these names with the class name: if class Foo has an<br /> attribute named <tt class="docutils literal">__a</tt>, it cannot be accessed by <tt class="docutils literal">Foo.__a</tt>. (An<br /> insistent user could still gain access by calling <tt class="docutils literal">Foo._Foo__a</tt>.)<br /> Generally, double leading underscores should be used only to avoid<br /> name conflicts with attributes in classes designed to be subclassed.
                                      </p>
                                      
                                      <p>
                                        Note: there is some controversy about the use of __names (see below).
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="constants">
                                      <h3>
                                        <a class="toc-backref" href="#id36">Constants</a>
                                      </h3>
                                      
                                      <p>
                                        Constants are usually defined on a module level and written in all<br /> capital letters with underscores separating words. Examples include<br /> <tt class="docutils literal">MAX_OVERFLOW</tt> and <tt class="docutils literal">TOTAL</tt>.
                                      </p>
                                    </div>
                                    
                                    <div class="section" id="designing-for-inheritance">
                                      <h3>
                                        <a class="toc-backref" href="#id37">Designing for inheritance</a>
                                      </h3>
                                      
                                      <p>
                                        Always decide whether a class&#8217;s methods and instance variables<br /> (collectively: &#8220;attributes&#8221;) should be public or non-public. If in<br /> doubt, choose non-public; it&#8217;s easier to make it public later than to<br /> make a public attribute non-public.
                                      </p>
                                      
                                      <p>
                                        Public attributes are those that you expect unrelated clients of your<br /> class to use, with your commitment to avoid backward incompatible<br /> changes. Non-public attributes are those that are not intended to be<br /> used by third parties; you make no guarantees that non-public<br /> attributes won&#8217;t change or even be removed.
                                      </p>
                                      
                                      <p>
                                        We don&#8217;t use the term &#8220;private&#8221; here, since no attribute is really<br /> private in Python (without a generally unnecessary amount of work).
                                      </p>
                                      
                                      <p>
                                        Another category of attributes are those that are part of the<br /> &#8220;subclass API&#8221; (often called &#8220;protected&#8221; in other languages). Some<br /> classes are designed to be inherited from, either to extend or modify<br /> aspects of the class&#8217;s behavior. When designing such a class, take<br /> care to make explicit decisions about which attributes are public,<br /> which are part of the subclass API, and which are truly only to be<br /> used by your base class.
                                      </p>
                                      
                                      <p>
                                        With this in mind, here are the Pythonic guidelines:
                                      </p>
                                      
                                      <ul>
                                        <li>
                                          <p class="first">
                                            Public attributes should have no leading underscores.
                                          </p>
                                        </li>
                                        
                                        <li>
                                          <p class="first">
                                            If your public attribute name collides with a reserved keyword,<br /> append a single trailing underscore to your attribute name. This is<br /> preferable to an abbreviation or corrupted spelling. (However,<br /> notwithstanding this rule, &#8216;cls&#8217; is the preferred spelling for any<br /> variable or argument which is known to be a class, especially the<br /> first argument to a class method.)
                                          </p>
                                          
                                          <p>
                                            Note 1: See the argument name recommendation above for class methods.</li> <li>
                                              <p class="first">
                                                For simple public data attributes, it is best to expose just the<br /> attribute name, without complicated accessor/mutator methods. Keep<br /> in mind that Python provides an easy path to future enhancement,<br /> should you find that a simple data attribute needs to grow<br /> functional behavior. In that case, use properties to hide<br /> functional implementation behind simple data attribute access<br /> syntax.
                                              </p>
                                              
                                              <p>
                                                Note 1: Properties only work on new-style classes.
                                              </p>
                                              
                                              <p>
                                                Note 2: Try to keep the functional behavior side-effect free,<br /> although side-effects such as caching are generally fine.
                                              </p>
                                              
                                              <p>
                                                Note 3: Avoid using properties for computationally expensive<br /> operations; the attribute notation makes the caller believe that<br /> access is (relatively) cheap.</li> <li>
                                                  <p class="first">
                                                    If your class is intended to be subclassed, and you have attributes<br /> that you do not want subclasses to use, consider naming them with<br /> double leading underscores and no trailing underscores. This<br /> invokes Python&#8217;s name mangling algorithm, where the name of the<br /> class is mangled into the attribute name. This helps avoid<br /> attribute name collisions should subclasses inadvertently contain<br /> attributes with the same name.
                                                  </p>
                                                  
                                                  <p>
                                                    Note 1: Note that only the simple class name is used in the mangled<br /> name, so if a subclass chooses both the same class name and attribute<br /> name, you can still get name collisions.
                                                  </p>
                                                  
                                                  <p>
                                                    Note 2: Name mangling can make certain uses, such as debugging and<br /> <tt class="docutils literal">__getattr__()</tt>, less convenient. However the name mangling<br /> algorithm is well documented and easy to perform manually.
                                                  </p>
                                                  
                                                  <p>
                                                    Note 3: Not everyone likes name mangling. Try to balance the<br /> need to avoid accidental name clashes with potential use by<br /> advanced callers.</li> </ul> </div> </div> <div class="section" id="public-and-internal-interfaces">
                                                      <h2>
                                                        <a class="toc-backref" href="#id38">Public and internal interfaces</a>
                                                      </h2>
                                                      
                                                      <p>
                                                        Any backwards compatibility guarantees apply only to public interfaces.<br /> Accordingly, it is important that users be able to clearly distinguish<br /> between public and internal interfaces.
                                                      </p>
                                                      
                                                      <p>
                                                        Documented interfaces are considered public, unless the documentation<br /> explicitly declares them to be provisional or internal interfaces exempt<br /> from the usual backwards compatibility guarantees. All undocumented<br /> interfaces should be assumed to be internal.
                                                      </p>
                                                      
                                                      <p>
                                                        To better support introspection, modules should explicitly declare the<br /> names in their public API using the <tt class="docutils literal">__all__</tt> attribute. Setting<br /> <tt class="docutils literal">__all__</tt> to an empty list indicates that the module has no public API.
                                                      </p>
                                                      
                                                      <p>
                                                        Even with <tt class="docutils literal">__all__</tt> set appropriately, internal interfaces (packages,<br /> modules, classes, functions, attributes or other names) should still be<br /> prefixed with a single leading underscore.
                                                      </p>
                                                      
                                                      <p>
                                                        An interface is also considered internal if any containing namespace<br /> (package, module or class) is considered internal.
                                                      </p>
                                                      
                                                      <p>
                                                        Imported names should always be considered an implementation detail.<br /> Other modules must not rely on indirect access to such imported names<br /> unless they are an explicitly documented part of the containing module&#8217;s<br /> API, such as <tt class="docutils literal">os.path</tt> or a package&#8217;s <tt class="docutils literal">__init__</tt> module that exposes<br /> functionality from submodules.
                                                      </p>
                                                    </div></div> 
                                                    
                                                    <div class="section" id="programming-recommendations">
                                                      <h1>
                                                        <a class="toc-backref" href="#id39">Programming Recommendations</a>
                                                      </h1>
                                                      
                                                      <ul>
                                                        <li>
                                                          <p class="first">
                                                            Code should be written in a way that does not disadvantage other<br /> implementations of Python (PyPy, Jython, IronPython, Cython, Psyco,<br /> and such).
                                                          </p>
                                                          
                                                          <p>
                                                            For example, do not rely on CPython&#8217;s efficient implementation of<br /> in-place string concatenation for statements in the form <tt class="docutils literal">a += b</tt><br /> or <tt class="docutils literal">a = a + b</tt>. This optimization is fragile even in CPython (it<br /> only works for some types) and isn&#8217;t present at all in implementations<br /> that don&#8217;t use refcounting. In performance sensitive parts of the<br /> library, the <tt class="docutils literal"><span class="pre">''.join()</span></tt> form should be used instead. This will<br /> ensure that concatenation occurs in linear time across various<br /> implementations.</li> <li>
                                                              <p class="first">
                                                                Comparisons to singletons like None should always be done with<br /> <tt class="docutils literal">is</tt> or <tt class="docutils literal">is not</tt>, never the equality operators.
                                                              </p>
                                                              
                                                              <p>
                                                                Also, beware of writing <tt class="docutils literal">if x</tt> when you really mean <tt class="docutils literal">if x is not<br /> None</tt> &#8212; e.g. when testing whether a variable or argument that<br /> defaults to None was set to some other value. The other value might<br /> have a type (such as a container) that could be false in a boolean<br /> context!</li> <li>
                                                                  <p class="first">
                                                                    When implementing ordering operations with rich comparisons, it is<br /> best to implement all six operations (<tt class="docutils literal">__eq__</tt>, <tt class="docutils literal">__ne__</tt>,<br /> <tt class="docutils literal">__lt__</tt>, <tt class="docutils literal">__le__</tt>, <tt class="docutils literal">__gt__</tt>, <tt class="docutils literal">__ge__</tt>) rather than relying<br /> on other code to only exercise a particular comparison.
                                                                  </p>
                                                                  
                                                                  <p>
                                                                    To minimize the effort involved, the <tt class="docutils literal">functools.total_ordering()</tt><br /> decorator provides a tool to generate missing comparison methods.
                                                                  </p>
                                                                  
                                                                  <p>
                                                                    <a class="reference external" href="/dev/peps/pep-0207">PEP 207</a> indicates that reflexivity rules <em>are</em> assumed by Python.<br /> Thus, the interpreter may swap <tt class="docutils literal">y > x</tt> with <tt class="docutils literal">x < y</tt>, <tt class="docutils literal">y >= x</tt><br /> with <tt class="docutils literal">x <= y</tt>, and may swap the arguments of <tt class="docutils literal">x == y</tt> and <tt class="docutils literal">x !=<br /> y</tt>. The <tt class="docutils literal">sort()</tt> and <tt class="docutils literal">min()</tt> operations are guaranteed to use<br /> the <tt class="docutils literal"><</tt> operator and the <tt class="docutils literal">max()</tt> function uses the <tt class="docutils literal">></tt><br /> operator. However, it is best to implement all six operations so<br /> that confusion doesn&#8217;t arise in other contexts.</li> <li>
                                                                      <p class="first">
                                                                        Always use a def statement instead of an assignment statement that binds<br /> a lambda expression directly to a name.
                                                                      </p>
                                                                      
                                                                      <p>
                                                                        Yes:
                                                                      </p>
                                                                      
                                                                      <pre class="literal-block">def f(x): return 2*x</pre>
                                                                      
                                                                      <p>
                                                                        No:
                                                                      </p>
                                                                      
                                                                      <pre class="literal-block">f = lambda x: 2*x</pre>
                                                                      
                                                                      <p>
                                                                        The first form means that the name of the resulting function object is<br /> specifically &#8216;f&#8217; instead of the generic &#8216;<lambda>&#8217;. This is more<br /> useful for tracebacks and string representations in general. The use<br /> of the assignment statement eliminates the sole benefit a lambda<br /> expression can offer over an explicit def statement (i.e. that it can<br /> be embedded inside a larger expression)</li> <li>
                                                                          <p class="first">
                                                                            Derive exceptions from <tt class="docutils literal">Exception</tt> rather than <tt class="docutils literal">BaseException</tt>.<br /> Direct inheritance from <tt class="docutils literal">BaseException</tt> is reserved for exceptions<br /> where catching them is almost always the wrong thing to do.
                                                                          </p>
                                                                          
                                                                          <p>
                                                                            Design exception hierarchies based on the distinctions that code<br /> <em>catching</em> the exceptions is likely to need, rather than the locations<br /> where the exceptions are raised. Aim to answer the question<br /> &#8220;What went wrong?&#8221; programmatically, rather than only stating that<br /> &#8220;A problem occurred&#8221; (see <a class="reference external" href="/dev/peps/pep-3151">PEP 3151</a> for an example of this lesson being<br /> learned for the builtin exception hierarchy)
                                                                          </p>
                                                                          
                                                                          <p>
                                                                            Class naming conventions apply here, although you should add the<br /> suffix &#8220;Error&#8221; to your exception classes if the exception is an<br /> error. Non-error exceptions that are used for non-local flow control<br /> or other forms of signaling need no special suffix.</li> <li>
                                                                              <p class="first">
                                                                                Use exception chaining appropriately. In Python 3, &#8220;raise X from Y&#8221;<br /> should be used to indicate explicit replacement without losing the<br /> original traceback.
                                                                              </p>
                                                                              
                                                                              <p>
                                                                                When deliberately replacing an inner exception (using &#8220;raise X&#8221; in<br /> Python 2 or &#8220;raise X from None&#8221; in Python 3.3+), ensure that relevant<br /> details are transferred to the new exception (such as preserving the<br /> attribute name when converting KeyError to AttributeError, or<br /> embedding the text of the original exception in the new exception<br /> message).</li> <li>
                                                                                  <p class="first">
                                                                                    When raising an exception in Python 2, use <tt class="docutils literal">raise <span class="pre">ValueError('message')</span></tt><br /> instead of the older form <tt class="docutils literal">raise ValueError, 'message'</tt>.
                                                                                  </p>
                                                                                  
                                                                                  <p>
                                                                                    The latter form is not legal Python 3 syntax.
                                                                                  </p>
                                                                                  
                                                                                  <p>
                                                                                    The paren-using form also means that when the exception arguments are<br /> long or include string formatting, you don&#8217;t need to use line<br /> continuation characters thanks to the containing parentheses.</li> <li>
                                                                                      <p class="first">
                                                                                        When catching exceptions, mention specific exceptions whenever<br /> possible instead of using a bare <tt class="docutils literal">except:</tt> clause.
                                                                                      </p>
                                                                                      
                                                                                      <p>
                                                                                        For example, use:
                                                                                      </p>
                                                                                      
                                                                                      <pre class="literal-block">try:
    import platform_specific_module
except ImportError:
    platform_specific_module = None</pre>
                                                                                      
                                                                                      <p>
                                                                                        A bare <tt class="docutils literal">except:</tt> clause will catch SystemExit and<br /> KeyboardInterrupt exceptions, making it harder to interrupt a<br /> program with Control-C, and can disguise other problems. If you<br /> want to catch all exceptions that signal program errors, use<br /> <tt class="docutils literal">except Exception:</tt> (bare except is equivalent to <tt class="docutils literal">except<br /> BaseException:</tt>).
                                                                                      </p>
                                                                                      
                                                                                      <p>
                                                                                        A good rule of thumb is to limit use of bare &#8216;except&#8217; clauses to two<br /> cases:
                                                                                      </p>
                                                                                      
                                                                                      <ol class="arabic simple">
                                                                                        <li>
                                                                                          If the exception handler will be printing out or logging the<br /> traceback; at least the user will be aware that an error has<br /> occurred.
                                                                                        </li>
                                                                                        <li>
                                                                                          If the code needs to do some cleanup work, but then lets the<br /> exception propagate upwards with <tt class="docutils literal">raise</tt>. <tt class="docutils literal"><span class="pre">try...finally</span></tt><br /> can be a better way to handle this case.
                                                                                        </li>
                                                                                      </ol>
                                                                                    </li>
                                                                                    
                                                                                    <li>
                                                                                      <p class="first">
                                                                                        When binding caught exceptions to a name, prefer the explicit name<br /> binding syntax added in Python 2.6:
                                                                                      </p>
                                                                                      
                                                                                      <pre class="literal-block">try:
    process_data()
except Exception as exc:
    raise DataProcessingFailedError(str(exc))</pre>
                                                                                      
                                                                                      <p>
                                                                                        This is the only syntax supported in Python 3, and avoids the<br /> ambiguity problems associated with the older comma-based syntax.</li> <li>
                                                                                          <p class="first">
                                                                                            When catching operating system errors, prefer the explicit exception<br /> hierarchy introduced in Python 3.3 over introspection of <tt class="docutils literal">errno</tt><br /> values.
                                                                                          </p>
                                                                                        </li>
                                                                                        
                                                                                        <li>
                                                                                          <p class="first">
                                                                                            Additionally, for all try/except clauses, limit the <tt class="docutils literal">try</tt> clause<br /> to the absolute minimum amount of code necessary. Again, this<br /> avoids masking bugs.
                                                                                          </p>
                                                                                          
                                                                                          <p>
                                                                                            Yes:
                                                                                          </p>
                                                                                          
                                                                                          <pre class="literal-block">try:
    value = collection[key]
except KeyError:
    return key_not_found(key)
else:
    return handle_value(value)</pre>
                                                                                          
                                                                                          <p>
                                                                                            No:
                                                                                          </p>
                                                                                          
                                                                                          <pre class="literal-block">try:
    # Too broad!
    return handle_value(collection[key])
except KeyError:
    # Will also catch KeyError raised by handle_value()
    return key_not_found(key)</pre>
                                                                                        </li>
                                                                                        
                                                                                        <li>
                                                                                          <p class="first">
                                                                                            When a resource is local to a particular section of code, use a<br /> <tt class="docutils literal">with</tt> statement to ensure it is cleaned up promptly and reliably<br /> after use. A try/finally statement is also acceptable.
                                                                                          </p>
                                                                                        </li>
                                                                                        
                                                                                        <li>
                                                                                          <p class="first">
                                                                                            Context managers should be invoked through separate functions or methods<br /> whenever they do something other than acquire and release resources.<br /> For example:
                                                                                          </p>
                                                                                          
                                                                                          <p>
                                                                                            Yes:
                                                                                          </p>
                                                                                          
                                                                                          <pre class="literal-block">with conn.begin_transaction():
    do_stuff_in_transaction(conn)</pre>
                                                                                          
                                                                                          <p>
                                                                                            No:
                                                                                          </p>
                                                                                          
                                                                                          <pre class="literal-block">with conn:
    do_stuff_in_transaction(conn)</pre>
                                                                                          
                                                                                          <p>
                                                                                            The latter example doesn&#8217;t provide any information to indicate that<br /> the __enter__ and __exit__ methods are doing something other than<br /> closing the connection after a transaction. Being explicit is<br /> important in this case.</li> <li>
                                                                                              <p class="first">
                                                                                                Use string methods instead of the string module.
                                                                                              </p>
                                                                                              
                                                                                              <p>
                                                                                                String methods are always much faster and share the same API with<br /> unicode strings. Override this rule if backward compatibility with<br /> Pythons older than 2.0 is required.</li> <li>
                                                                                                  <p class="first">
                                                                                                    Use <tt class="docutils literal"><span class="pre">''.startswith()</span></tt> and <tt class="docutils literal"><span class="pre">''.endswith()</span></tt> instead of string<br /> slicing to check for prefixes or suffixes.
                                                                                                  </p>
                                                                                                  
                                                                                                  <p>
                                                                                                    startswith() and endswith() are cleaner and less error prone. For<br /> example:
                                                                                                  </p>
                                                                                                  
                                                                                                  <pre class="literal-block">Yes: if foo.startswith('bar'):
No:  if foo[:3] == 'bar':</pre>
                                                                                                </li>
                                                                                                
                                                                                                <li>
                                                                                                  <p class="first">
                                                                                                    Object type comparisons should always use isinstance() instead of<br /> comparing types directly.
                                                                                                  </p>
                                                                                                  
                                                                                                  <pre class="literal-block">Yes: if isinstance(obj, int):

No:  if type(obj) is type(1):</pre>
                                                                                                  
                                                                                                  <p>
                                                                                                    When checking if an object is a string, keep in mind that it might<br /> be a unicode string too! In Python 2, str and unicode have a<br /> common base class, basestring, so you can do:
                                                                                                  </p>
                                                                                                  
                                                                                                  <pre class="literal-block">if isinstance(obj, basestring):</pre>
                                                                                                  
                                                                                                  <p>
                                                                                                    Note that in Python 3, <tt class="docutils literal">unicode</tt> and <tt class="docutils literal">basestring</tt> no longer exist<br /> (there is only <tt class="docutils literal">str</tt>) and a bytes object is no longer a kind of<br /> string (it is a sequence of integers instead)</li> <li>
                                                                                                      <p class="first">
                                                                                                        For sequences, (strings, lists, tuples), use the fact that empty<br /> sequences are false.
                                                                                                      </p>
                                                                                                      
                                                                                                      <pre class="literal-block">Yes: if not seq:
     if seq:

No: if len(seq)
    if not len(seq)</pre>
                                                                                                    </li>
                                                                                                    
                                                                                                    <li>
                                                                                                      <p class="first">
                                                                                                        Don&#8217;t write string literals that rely on significant trailing<br /> whitespace. Such trailing whitespace is visually indistinguishable<br /> and some editors (or more recently, reindent.py) will trim them.
                                                                                                      </p>
                                                                                                    </li>
                                                                                                    
                                                                                                    <li>
                                                                                                      <p class="first">
                                                                                                        Don&#8217;t compare boolean values to True or False using <tt class="docutils literal">==</tt>.
                                                                                                      </p>
                                                                                                      
                                                                                                      <pre class="literal-block">Yes:   if greeting:
No:    if greeting == True:
Worse: if greeting is True:</pre>
                                                                                                    </li>
                                                                                                    
                                                                                                    <li>
                                                                                                      <p class="first">
                                                                                                        The Python standard library will not use function annotations as<br /> that would result in a premature commitment to a particular<br /> annotation style. Instead, the annotations are left for users to<br /> discover and experiment with useful annotation styles.
                                                                                                      </p>
                                                                                                      
                                                                                                      <p>
                                                                                                        It is recommended that third party experiments with annotations use an<br /> associated decorator to indicate how the annotation should be<br /> interpreted.
                                                                                                      </p>
                                                                                                      
                                                                                                      <p>
                                                                                                        Early core developer attempts to use function annotations revealed<br /> inconsistent, ad-hoc annotation styles. For example:
                                                                                                      </p>
                                                                                                      
                                                                                                      <ul class="simple">
                                                                                                        <li>
                                                                                                          <tt class="docutils literal">[str]</tt> was ambiguous as to whether it represented a list of<br /> strings or a value that could be either <em>str</em> or <em>None</em>.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          The notation <tt class="docutils literal"><span class="pre">open(file:(str,bytes))</span></tt> was used for a value that<br /> could be either <em>bytes</em> or <em>str</em> rather than a 2-tuple containing<br /> a <em>str</em> value followed by a <em>bytes</em> value.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          The annotation <tt class="docutils literal">seek(whence:int)</tt> exhibited a mix of<br /> over-specification and under-specification: <em>int</em> is too<br /> restrictive (anything with <tt class="docutils literal">__index__</tt> would be allowed) and it<br /> is not restrictive enough (only the values 0, 1, and 2 are<br /> allowed). Likewise, the annotation <tt class="docutils literal">write(b: bytes)</tt> was also<br /> too restrictive (anything supporting the buffer protocol would be<br /> allowed).
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          Annotations such as <tt class="docutils literal">read1(n: int=None)</tt> were self-contradictory<br /> since <em>None</em> is not an <em>int</em>. Annotations such as<br /> <tt class="docutils literal">source_path(self, fullname:str) <span class="pre">-></span> object</tt> were confusing about<br /> what the return type should be.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          In addition to the above, annotations were inconsistent in the use<br /> of concrete types versus abstract types: <em>int</em> versus <em>Integral</em><br /> and set/frozenset versus MutableSet/Set.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          Some annotations in the abstract base classes were incorrect<br /> specifications. For example, set-to-set operations require<br /> <em>other</em> to be another instance of <em>Set</em> rather than just an<br /> <em>Iterable</em>.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          A further issue was that annotations become part of the<br /> specification but weren&#8217;t being tested.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          In most cases, the docstrings already included the type<br /> specifications and did so with greater clarity than the function<br /> annotations. In the remaining cases, the docstrings were improved<br /> once the annotations were removed.
                                                                                                        </li>
                                                                                                        <li>
                                                                                                          The observed function annotations were too ad-hoc and inconsistent<br /> to work with a coherent system of automatic type checking or<br /> argument validation. Leaving these annotations in the code would<br /> have made it more difficult to make changes later so that<br /> automated utilities could be supported.
                                                                                                        </li>
                                                                                                      </ul>
                                                                                                    </li></ul> </div> 
                                                                                                    
                                                                                                    <div class="section" id="references">
                                                                                                      <h1>
                                                                                                        <a class="toc-backref" href="#id40">References</a>
                                                                                                      </h1>
                                                                                                      
                                                                                                      <table class="docutils footnote" id="id4" frame="void" rules="none">
                                                                                                        <colgroup> <col class="label" /> <col /></colgroup> <tr>
                                                                                                          <td class="label">
                                                                                                            <a class="fn-backref" href="#id1">[1]</a>
                                                                                                          </td>
                                                                                                          
                                                                                                          <td>
                                                                                                            <a class="reference external" href="/dev/peps/pep-0007">PEP 7</a>, Style Guide for C Code, van Rossum
                                                                                                          </td>
                                                                                                        </tr>
                                                                                                      </table>
                                                                                                      
                                                                                                      <table class="docutils footnote" id="id5" frame="void" rules="none">
                                                                                                        <colgroup> <col class="label" /> <col /></colgroup> <tr>
                                                                                                          <td class="label">
                                                                                                            <a class="fn-backref" href="#id2">[2]</a>
                                                                                                          </td>
                                                                                                          
                                                                                                          <td>
                                                                                                            Barry&#8217;s GNU Mailman style guide<br /> <a class="reference external" href="http://barry.warsaw.us/software/STYLEGUIDE.txt">http://barry.warsaw.us/software/STYLEGUIDE.txt</a>
                                                                                                          </td>
                                                                                                        </tr>
                                                                                                      </table>
                                                                                                      
                                                                                                      <table class="docutils footnote" id="id6" frame="void" rules="none">
                                                                                                        <colgroup> <col class="label" /> <col /></colgroup> <tr>
                                                                                                          <td class="label">
                                                                                                            <a class="fn-backref" href="#id3">[3]</a>
                                                                                                          </td>
                                                                                                          
                                                                                                          <td>
                                                                                                            <a class="reference external" href="http://www.wikipedia.com/wiki/CamelCase">http://www.wikipedia.com/wiki/CamelCase</a>
                                                                                                          </td>
                                                                                                        </tr>
                                                                                                      </table>
                                                                                                      
                                                                                                      <table class="docutils footnote" id="id7" frame="void" rules="none">
                                                                                                        <colgroup> <col class="label" /> <col /></colgroup> <tr>
                                                                                                          <td class="label">
                                                                                                            [4]
                                                                                                          </td>
                                                                                                          
                                                                                                          <td>
                                                                                                            <a class="reference external" href="/dev/peps/pep-0008">PEP 8</a> modernisation, July 2013<br /> <a class="reference external" href="http://bugs.python.org/issue18472">http://bugs.python.org/issue18472</a>
                                                                                                          </td>
                                                                                                        </tr>
                                                                                                      </table>
                                                                                                    </div>
                                                                                                    
                                                                                                    <div class="section" id="copyright">
                                                                                                      <h1>
                                                                                                        <a class="toc-backref" href="#id41">Copyright</a>
                                                                                                      </h1>
                                                                                                      
                                                                                                      <p>
                                                                                                        This document has been placed in the public domain.
                                                                                                      </p>
                                                                                                      
                                                                                                      <p>
                                                                                                        <!-- Local Variables: mode: indented-text indent-tabs-mode: nil sentence-end-double-space: t fill-column: 70 coding: utf-8 End: -->
                                                                                                      </p>
                                                                                                    </div></div> 
                                                                                                    
                                                                                                    <p>
                                                                                                      转载请注明：<a href="http://localhost/wordpress">于哲的博客</a> &raquo; <a href="http://localhost/wordpress/2976.html">【Python】PEP8</a>
                                                                                                    </p>