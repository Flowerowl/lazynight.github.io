---
title: 'C#委托与事件实例'
author: Flowerowl
layout: post
permalink: /1641.html
duoshuo_thread_id:
  - 1266986
views:
  - 775
bot_views:
  - 2
categories:
  - 'C#'
  - 代码
---
<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;">
  <span style="color: #99968b; font-style: italic;">01</span> <span style="color: #8ac6f2;">using</span> <span style="color: #f6f3e8;">System</span>;<br /> <span style="color: #99968b; font-style: italic;">02</span> <span style="color: #8ac6f2;">namespace</span> <span style="color: #f6f3e8;">z</span><br /> <span style="color: #99968b; font-style: italic;">03</span> <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">04</span>     <span style="color: #8ac6f2;">class</span> <span style="color: #f6f3e8;">Program</span><br /> <span style="color: #f810b0;">05</span>     <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">06</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">static</span>  <span style="color: #8ac6f2;">void</span> <span style="color: #cae682;">Main</span>()<br /> <span style="color: #99968b; font-style: italic;">07</span>         <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">08</span>             <span style="color: #f6f3e8;">Heater</span> <span style="color: #f6f3e8;">heater</span> <span style="color: #f6f3e8;">=</span> <span style="color: #8ac6f2;">new</span> <span style="color: #f6f3e8;">Heater</span>();<br /> <span style="color: #99968b; font-style: italic;">09</span>             <span style="color: #f6f3e8;">Alarm</span> <span style="color: #f6f3e8;">alarm</span> <span style="color: #f6f3e8;">=</span> <span style="color: #8ac6f2;">new</span> <span style="color: #f6f3e8;">Alarm</span>();<br /> <span style="color: #f810b0;">10</span>             <span style="color: #f6f3e8;">heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">BoilEvent</span> <span style="color: #f6f3e8;">+=</span> <span style="color: #f6f3e8;">alarm</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">MakeAlert</span>;<br /> <span style="color: #99968b; font-style: italic;">11</span>             <span style="color: #f6f3e8;">heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">BoilEvent</span> <span style="color: #f6f3e8;">+=</span> <span style="color: #f6f3e8;">Display</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">ShowMsg</span>;<br /> <span style="color: #99968b; font-style: italic;">12</span>             <span style="color: #f6f3e8;">heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">BoilWater</span>();<br /> <span style="color: #99968b; font-style: italic;">13</span>             <span style="color: #f6f3e8;">Console</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">ReadLine</span>();<br /> <span style="color: #99968b; font-style: italic;">14</span>         <span style="color: #f6f3e8;">}</span><br /> <span style="color: #f810b0;">15</span>     <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">16</span>     <span style="color: #8ac6f2;">class</span> <span style="color: #f6f3e8;">Heater</span><br /> <span style="color: #99968b; font-style: italic;">17</span>     <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">18</span>         <span style="color: #8ac6f2;">private</span> <span style="color: #cae682;">int</span> <span style="color: #f6f3e8;">temperature</span>;<br /> <span style="color: #99968b; font-style: italic;">19</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #cae682;">string</span> <span style="color: #f6f3e8;">type</span> <span style="color: #f6f3e8;">=</span> <span style="color: #95e454; font-style: italic;">&#8220;Lazynight Heater&#8221;</span>;<br /> <span style="color: #f810b0;">20</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #cae682;">string</span> <span style="color: #f6f3e8;">area</span> <span style="color: #f6f3e8;">=</span> <span style="color: #95e454; font-style: italic;">&#8220;Made in China.&#8221;</span>;<br /> <span style="color: #99968b; font-style: italic;">21</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">delegate</span> <span style="color: #8ac6f2;">void</span> <span style="color: #cae682;">BoilHandler</span>(<span style="color: #f6f3e8;">Object</span> <span style="color: #f6f3e8;">sender</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">BoiledEventArgs</span> <span style="color: #f6f3e8;">e</span>);<br /> <span style="color: #99968b; font-style: italic;">22</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">event</span> <span style="color: #f6f3e8;">BoilHandler</span> <span style="color: #f6f3e8;">BoilEvent</span>;<br /> <span style="color: #99968b; font-style: italic;">23</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">class</span> <span style="color: #f6f3e8;">BoiledEventArgs</span> <span style="color: #f6f3e8;">:</span> <span style="color: #f6f3e8;">EventArgs</span><br /> <span style="color: #99968b; font-style: italic;">24</span>         <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">25</span>             <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">readonly</span> <span style="color: #cae682;">int</span> <span style="color: #f6f3e8;">temperature</span>;<br /> <span style="color: #99968b; font-style: italic;">26</span>             <span style="color: #8ac6f2;">public</span> <span style="color: #cae682;">BoiledEventArgs</span>(<span style="color: #cae682;">int</span> <span style="color: #f6f3e8;">temperature</span>)<br /> <span style="color: #99968b; font-style: italic;">27</span>             <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">28</span>                 <span style="color: #8ac6f2;">this</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">temperature</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">temperature</span>;<br /> <span style="color: #99968b; font-style: italic;">29</span>             <span style="color: #f6f3e8;">}</span><br /> <span style="color: #f810b0;">30</span>         <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">31</span>         <span style="color: #8ac6f2;">protected</span> <span style="color: #8ac6f2;">void</span> <span style="color: #cae682;">OnBoiled</span>(<span style="color: #f6f3e8;">BoiledEventArgs</span> <span style="color: #f6f3e8;">e</span>)<br /> <span style="color: #99968b; font-style: italic;">32</span>         <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">33</span>             <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">BoilEvent</span> <span style="color: #f6f3e8;">!=</span> <span style="color: #8ac6f2;">null</span>)<br /> <span style="color: #99968b; font-style: italic;">34</span>             <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">35</span>                 <span style="color: #f6f3e8;">BoilEvent</span>(<span style="color: #8ac6f2;">this</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">e</span>);<br /> <span style="color: #99968b; font-style: italic;">36</span>             <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">37</span>         <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">38</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">void</span> <span style="color: #cae682;">BoilWater</span>()<br /> <span style="color: #99968b; font-style: italic;">39</span>         <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">40</span>             <span style="color: #8ac6f2;">for</span> (<span style="color: #cae682;">int</span> <span style="color: #f6f3e8;">i</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;"></span>; <span style="color: #f6f3e8;">i</span> <span style="color: #f6f3e8;"><=</span> <span style="color: #e5786d;">100</span>; <span style="color: #f6f3e8;">i</span><span style="color: #f6f3e8;">++)</span><br /> <span style="color: #99968b; font-style: italic;">41</span>             <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">42</span>                 <span style="color: #f6f3e8;">temperature</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">i</span>;<br /> <span style="color: #99968b; font-style: italic;">43</span>                 <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">temperature</span> <span style="color: #f6f3e8;">></span> <span style="color: #e5786d;">95</span>)<br /> <span style="color: #99968b; font-style: italic;">44</span>                 <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">45</span>                     <span style="color: #f6f3e8;">BoiledEventArgs</span> <span style="color: #f6f3e8;">e</span> <span style="color: #f6f3e8;">=</span> <span style="color: #8ac6f2;">new</span> <span style="color: #f6f3e8;">BoiledEventArgs</span>(<span style="color: #f6f3e8;">temperature</span>);<br /> <span style="color: #99968b; font-style: italic;">46</span>                     <span style="color: #f6f3e8;">OnBoiled</span>(<span style="color: #f6f3e8;">e</span>);<br /> <span style="color: #99968b; font-style: italic;">47</span>                 <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">48</span><br /> <span style="color: #99968b; font-style: italic;">49</span>             <span style="color: #f6f3e8;">}</span><br /> <span style="color: #f810b0;">50</span>         <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">51</span>     <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">52</span>     <span style="color: #8ac6f2;">class</span> <span style="color: #f6f3e8;">Alarm</span><br /> <span style="color: #99968b; font-style: italic;">53</span>     <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">54</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">void</span> <span style="color: #cae682;">MakeAlert</span>(<span style="color: #cae682;">object</span> <span style="color: #f6f3e8;">sender</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">Heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">BoiledEventArgs</span> <span style="color: #f6f3e8;">e</span>)<br /> <span style="color: #f810b0;">55</span>         <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">56</span>             <span style="color: #f6f3e8;">Heater</span> <span style="color: #f6f3e8;">heater</span> <span style="color: #f6f3e8;">=</span> (<span style="color: #f6f3e8;">Heater</span>)<span style="color: #f6f3e8;">sender</span>;<br /> <span style="color: #99968b; font-style: italic;">57</span>             <span style="color: #f6f3e8;">Console</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">WriteLine</span>(<span style="color: #95e454; font-style: italic;">&#8220;{0}-{1}&#8221;</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">area</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">type</span>);<br /> <span style="color: #99968b; font-style: italic;">58</span>             <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">e</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">temperature</span> <span style="color: #f6f3e8;">==</span> <span style="color: #e5786d;">100</span>)<br /> <span style="color: #99968b; font-style: italic;">59</span>             <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">60</span>                 <span style="color: #f6f3e8;">Console</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">WriteLine</span>(<span style="color: #95e454; font-style: italic;">&#8220;水开了。&#8221;</span>);<br /> <span style="color: #99968b; font-style: italic;">61</span>             <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">62</span>             <span style="color: #8ac6f2;">else</span><br /> <span style="color: #99968b; font-style: italic;">63</span>             <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">64</span>                 <span style="color: #f6f3e8;">Console</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">WriteLine</span>(<span style="color: #95e454; font-style: italic;">&#8220;水已经{0}度了。&#8221;</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">e</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">temperature</span>);<br /> <span style="color: #f810b0;">65</span>             <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">66</span>         <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">67</span>     <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">68</span>     <span style="color: #8ac6f2;">class</span> <span style="color: #f6f3e8;">Display</span><br /> <span style="color: #99968b; font-style: italic;">69</span>     <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">70</span>         <span style="color: #8ac6f2;">public</span> <span style="color: #8ac6f2;">static</span> <span style="color: #8ac6f2;">void</span> <span style="color: #cae682;">ShowMsg</span>(<span style="color: #cae682;">object</span> <span style="color: #f6f3e8;">sender</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">Heater</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">BoiledEventArgs</span> <span style="color: #f6f3e8;">e</span>)<br /> <span style="color: #99968b; font-style: italic;">71</span>         <span style="color: #f6f3e8;">{</span><br /> <span style="color: #99968b; font-style: italic;">72</span>             <span style="color: #f6f3e8;">Heater</span> <span style="color: #f6f3e8;">heater</span> <span style="color: #f6f3e8;">=</span> (<span style="color: #f6f3e8;">Heater</span>)<span style="color: #f6f3e8;">sender</span>;<br /> <span style="color: #99968b; font-style: italic;">73</span>             <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">e</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">temperature</span> <span style="color: #f6f3e8;">!=</span> <span style="color: #e5786d;">100</span>)<br /> <span style="color: #99968b; font-style: italic;">74</span>             <span style="color: #f6f3e8;">{</span><br /> <span style="color: #f810b0;">75</span>                 <span style="color: #f6f3e8;">Console</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">WriteLine</span>(<span style="color: #95e454; font-style: italic;">&#8220;水快开了,当前温度:{0}&#8221;</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">e</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">temperature</span>);<br /> <span style="color: #99968b; font-style: italic;">76</span>             <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">77</span>         <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">78</span>     <span style="color: #f6f3e8;">}</span><br /> <span style="color: #99968b; font-style: italic;">79</span> <span style="color: #f6f3e8;">}</span>
</div>

<img class="aligncenter size-full wp-image-1642" title="Lazynight" src="http://lazynight.me/wp-content/uploads/2012/03/Lazynight.gif" alt="" width="309" height="315" />

转载请注明：[于哲的博客][1] &raquo; [C#委托与事件实例][2]

 [1]: http://localhost/wordpress
 [2]: http://localhost/wordpress/1641.html