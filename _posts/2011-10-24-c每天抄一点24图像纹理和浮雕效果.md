---
title: 'C#每天抄一点(24):图像纹理和浮雕效果'
author: Flowerowl
layout: post
permalink: /648.html
duoshuo_thread_id:
  - 1266877
views:
  - 876
bot_views:
  - 3
categories:
  - 'C#'
  - 代码
---
<span style="color: #ff6600;">一首来自Loveage的歌，那首禁曲想必大家都听过，喜欢这种烟雾缭绕迷幻的镜像。</span>

* * *

Bitmap对象封装了ＧＤＩ+中的一个位图，此位图由图形图像及其属性的像素数据组成.因此Bitmap是用于处理由像素数据定义的图像的对象.

Bitmap类使用LockBits和UnLockBits方法来将位图的数据矩阵保存在内存中、直接对它进行操作，最后用修改后的数据代替位图中的原始数据。

LockBits方法和UnlockBits方法分别锁定和解锁系统内存中的位图像素.在基于像素点的图像处理方法中使用LockBits和UnlockBits是一个很好的方式，这两种方法可以使我们指定像素的范围来控制位图的任意一部分，从而消除了通过循环对位图的像素逐个进行处理，每调用LockBits之后都应该调用一次UnlockBits.

BitmapData对象指定了位图的属性：

Scan0：被锁定数组的首字节地址，如果整个图像被锁定，则是图像的第一个字节地址.

Stride：步幅，也称为扫描宽度. 数据矩阵中的行宽，以byte为单位。可能会扩展几个Byte。

PixelFormat：数据的实际像素格式，这对矩阵中字节的定位很重要。

Width：位图的宽度。

Height：位图的高度。

<img class="aligncenter size-full wp-image-651" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/10/61f05b6c36ae8ca9431694a3.jpg" alt="" width="379" height="349" />

如果这个看不懂，我又找了一个，这个比较容易理解。

<img class="aligncenter size-full wp-image-652" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/10/0_1299200804IIji.png" alt="" width="306" height="250" />

<img class="aligncenter size-full wp-image-654" title="Lazynight | 夜阑" src="http://lazynight.me/wp-content/uploads/2011/10/20111024221840.jpg" alt="" width="410" height="416" />

&nbsp;

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #c0c0c0; background-color: #000000;">
  <span style="color: #696969;">01</span> <span style="color: #696969;">/*</span><br /> <span style="color: #696969;">02</span> <span style="color: #696969;"> * 由SharpDevelop创建。</span><br /> <span style="color: #696969;">03</span> <span style="color: #696969;"> * 用户： Lazynight</span><br /> <span style="color: #696969;">04</span> <span style="color: #696969;"> * 日期: 2011/10/24</span><br /> <span style="color: #f810b0;">05</span> <span style="color: #696969;"> * 时间: 13:42</span><br /> <span style="color: #696969;">06</span> <span style="color: #696969;"> * </span><br /> <span style="color: #696969;">07</span> <span style="color: #696969;"> * 要改变这种模板请点击 工具|选项|代码编写|编辑标准头文件</span><br /> <span style="color: #696969;">08</span> <span style="color: #696969;"> */</span><br /> <span style="color: #696969;">09</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System</span>;<br /> <span style="color: #f810b0;">10</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Collections.Generic</span>;<br /> <span style="color: #696969;">11</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Drawing</span>;<br /> <span style="color: #696969;">12</span> <span style="color: #ff4400; font-weight: bold;">using</span> <span style="color: #c0c0c0;">System.Windows.Forms</span>;<br /> <span style="color: #696969;">13</span><br /> <span style="color: #696969;">14</span> <span style="color: #ff4400; font-weight: bold;">namespace</span> <span style="color: #c0c0c0;">Lazy24_</span><span style="color: #c0c0c0;">图像纹理和浮雕效果</span><br /> <span style="color: #f810b0;">15</span> <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">16</span><br /> <span style="color: #696969;">17</span>     <span style="color: #ff4400; font-weight: bold;">public</span> <span style="color: #ff4400; font-weight: bold;">partial</span> <span style="color: #ff4400; font-weight: bold;">class</span> <span style="color: #c0c0c0;">MainForm</span> <span style="color: #c0c0c0;">:</span> <span style="color: #c0c0c0;">Form</span><br /> <span style="color: #696969;">18</span>     <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">19</span>         <span style="color: #c0c0c0;">Bitmap</span> <span style="color: #c0c0c0;">Night_bitmap</span>;<span style="color: #696969;">//定义共有变量</span><br /> <span style="color: #f810b0;">20</span>         <span style="color: #ff4400; font-weight: bold;">public</span> <span style="color: #ffff00;">MainForm</span>()<br /> <span style="color: #696969;">21</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">22</span>             <span style="color: #c0c0c0;">InitializeComponent</span>();<br /> <span style="color: #696969;">23</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">24</span><br /> <span style="color: #f810b0;">25</span>         <span style="color: #ff4400; font-weight: bold;">void</span> <span style="color: #ffff00;">Button1Click</span>(<span style="color: #ffffff;">object</span> <span style="color: #c0c0c0;">sender</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">EventArgs</span> <span style="color: #c0c0c0;">e</span>)<br /> <span style="color: #696969;">26</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">27</span>             <span style="color: #c0c0c0;">openFileDialog1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Filter</span><span style="color: #c0c0c0;">=</span><span style="color: #d13800;">&#8220;*.jpg,*.jpeg,*.bmp,*.gif,*.ico,*.png,*.tif,*.wmf|*.jpg;*.jpeg;*.bmp;*.gif;*.ico;*.png;*.tif;*.wmf&#8221;</span>;<br /> <span style="color: #696969;">28</span>             <span style="color: #696969;">//设置打开图像的类型</span><br /> <span style="color: #696969;">29</span>             <span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">openFileDialog1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">ShowDialog</span>();<span style="color: #696969;">//打开对话框</span><br /> <span style="color: #f810b0;">30</span>             <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">openFileDialog1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FileName</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Trim</span><span style="color: #c0c0c0;">()==</span><span style="color: #d13800;">&#8220;&#8221;</span>)<br /> <span style="color: #696969;">31</span>                 <span style="color: #ff4400; font-weight: bold;">return</span>;<br /> <span style="color: #696969;">32</span>             <span style="color: #ff4400; font-weight: bold;">try</span><br /> <span style="color: #696969;">33</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">34</span>                 <span style="color: #696969;">//把打开的图像赋给Bitmap变量</span><br /> <span style="color: #f810b0;">35</span>                 <span style="color: #c0c0c0;">Bitmap</span> <span style="color: #c0c0c0;">SrcBitmap</span><span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Bitmap</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">openFileDialog1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FileName</span>);<br /> <span style="color: #696969;">36</span>                 <span style="color: #c0c0c0;">Night_bitmap</span> <span style="color: #c0c0c0;">=</span> <span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Bitmap</span>(<span style="color: #c0c0c0;">SrcBitmap</span><span style="color: #c0c0c0;">,</span><span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">pictureBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Width</span><span style="color: #c0c0c0;">,</span><span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">pictureBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Height</span>);<br /> <span style="color: #696969;">37</span>                 <span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">pictureBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Image</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Night_bitmap</span>;<span style="color: #696969;">// 在picturebox显示图像</span><br /> <span style="color: #696969;">38</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">39</span>             <span style="color: #ff4400; font-weight: bold;">catch</span><br /> <span style="color: #f810b0;">40</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">41</span>                 <span style="color: #696969;">//提示对话框</span><br /> <span style="color: #696969;">42</span>                 <span style="color: #c0c0c0;">MessageBox</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Show</span>(<span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;打开图像文件错误&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #d13800;">&#8220;提示&#8221;</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxButtons</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">OK</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">MessageBoxIcon</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Information</span>);<br /> <span style="color: #696969;">43</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">44</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #f810b0;">45</span><br /> <span style="color: #696969;">46</span>         <span style="color: #ff4400; font-weight: bold;">void</span> <span style="color: #ffff00;">Button2Click</span>(<span style="color: #ffffff;">object</span> <span style="color: #c0c0c0;">sender</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">EventArgs</span> <span style="color: #c0c0c0;">e</span>)<br /> <span style="color: #696969;">47</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">48</span>             <span style="color: #c0c0c0;">Image</span> <span style="color: #c0c0c0;">Lazy_image</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">System</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Drawing</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Image</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FromFile</span>(<span style="color: #c0c0c0;">openFileDialog1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FileName</span>);<br /> <span style="color: #696969;">49</span>             <span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Bitmap</span>(<span style="color: #c0c0c0;">Lazy_image</span>);<br /> <span style="color: #f810b0;">50</span>             <span style="color: #c0c0c0;">Rectangle</span> <span style="color: #c0c0c0;">rect</span><span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Rectangle</span>(<span style="color: #c0c0c0;"></span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;"></span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Width</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Height</span>);<br /> <span style="color: #696969;">51</span>             <span style="color: #c0c0c0;">System</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Drawing</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Imaging</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">BitmapData</span> <span style="color: #c0c0c0;">Lazy_bmpdata</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">LockBits</span>(<span style="color: #c0c0c0;">rect</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">System</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Drawing</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Imaging</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">ImageLockMode</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">ReadWrite</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">PixelFormat</span>);<br /> <span style="color: #696969;">52</span>             <span style="color: #696969;">//将指定的图像锁定到内存中</span><br /> <span style="color: #696969;">53</span>             <span style="color: #c0c0c0;">IntPtr</span> <span style="color: #c0c0c0;">Lazy_ptr</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Lazy_bmpdata</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Scan0</span>;<br /> <span style="color: #696969;">54</span>             <span style="color: #696969;">//获得图像中第一个像素数据的地址</span><br /> <span style="color: #f810b0;">55</span>             <span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">Lazy_bytes</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Width</span><span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Height</span><span style="color: #c0c0c0;">*</span><span style="color: #c0c0c0;">3</span>;<br /> <span style="color: #696969;">56</span>             <span style="color: #ffffff;">byte</span><span style="color: #c0c0c0;">[]</span> <span style="color: #c0c0c0;">Lazy_rgbvalues</span><span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #ffffff;">byte</span><span style="color: #c0c0c0;">[</span><span style="color: #c0c0c0;">Lazy_bytes</span><span style="color: #c0c0c0;">];</span><br /> <span style="color: #696969;">57</span>             <span style="color: #c0c0c0;">System</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Runtime</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">InteropServices</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Marshal</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Copy</span>(<span style="color: #c0c0c0;">Lazy_ptr</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Lazy_rgbvalues</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;"></span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Lazy_bytes</span>);<br /> <span style="color: #696969;">58</span>             <span style="color: #696969;">//使用RGB值为声明的Lazy_rgbvalues数组赋值</span><br /> <span style="color: #696969;">59</span>             <span style="color: #ff4400; font-weight: bold;">for</span>(<span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">count</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<span style="color: #c0c0c0;">count</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">Lazy_rgbvalues</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Length</span>;<span style="color: #c0c0c0;">count</span><span style="color: #c0c0c0;">+=</span><span style="color: #c0c0c0;">3</span>)<br /> <span style="color: #f810b0;">60</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">61</span>                 <span style="color: #c0c0c0;">Lazy_rgbvalues</span><span style="color: #c0c0c0;">[</span><span style="color: #c0c0c0;">count</span><span style="color: #c0c0c0;">]=</span><span style="color: #c0c0c0;">255</span>;<br /> <span style="color: #696969;">62</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">63</span>             <span style="color: #c0c0c0;">System</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Runtime</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">InteropServices</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Marshal</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Copy</span>(<span style="color: #c0c0c0;">Lazy_rgbvalues</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;"></span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Lazy_ptr</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Lazy_bytes</span>);<br /> <span style="color: #696969;">64</span>             <span style="color: #696969;">//使用RGB值为图像的像素点着色</span><br /> <span style="color: #f810b0;">65</span>             <span style="color: #c0c0c0;">Night_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">UnlockBits</span>(<span style="color: #c0c0c0;">Lazy_bmpdata</span>);<br /> <span style="color: #696969;">66</span>             <span style="color: #696969;">//从内存中解锁图像</span><br /> <span style="color: #696969;">67</span>             <span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">pictureBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Image</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Night_bitmap</span>;<br /> <span style="color: #696969;">68</span><br /> <span style="color: #696969;">69</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #f810b0;">70</span><br /> <span style="color: #696969;">71</span>         <span style="color: #ff4400; font-weight: bold;">void</span> <span style="color: #ffff00;">Button3Click</span>(<span style="color: #ffffff;">object</span> <span style="color: #c0c0c0;">sender</span><span style="color: #c0c0c0;">,</span> <span style="color: #c0c0c0;">EventArgs</span> <span style="color: #c0c0c0;">e</span>)<br /> <span style="color: #696969;">72</span>         <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">73</span>             <span style="color: #c0c0c0;">Image</span> <span style="color: #c0c0c0;">Lazy_image</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">System</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Drawing</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Image</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FromFile</span>(<span style="color: #c0c0c0;">openFileDialog1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FileName</span>);<br /> <span style="color: #696969;">74</span>             <span style="color: #c0c0c0;">Bitmap</span> <span style="color: #c0c0c0;">Lazy_bitmap</span> <span style="color: #c0c0c0;">=</span><span style="color: #ff4400; font-weight: bold;">new</span> <span style="color: #c0c0c0;">Bitmap</span>(<span style="color: #c0c0c0;">Lazy_image</span>);<span style="color: #696969;">//创建Bitmap对象实例</span><br /> <span style="color: #f810b0;">75</span>             <span style="color: #ff4400; font-weight: bold;">for</span>(<span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">i</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<span style="color: #c0c0c0;">i</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">Lazy_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Width</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span>;<span style="color: #c0c0c0;">i</span><span style="color: #c0c0c0;">++)</span><br /> <span style="color: #696969;">76</span>             <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">77</span>                 <span style="color: #ff4400; font-weight: bold;">for</span>(<span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">j</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<span style="color: #c0c0c0;">j</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;">Lazy_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Height</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span>;<span style="color: #c0c0c0;">j</span><span style="color: #c0c0c0;">++)</span><br /> <span style="color: #696969;">78</span>                 <span style="color: #c0c0c0;">{</span><br /> <span style="color: #696969;">79</span>                     <span style="color: #c0c0c0;">Color</span> <span style="color: #c0c0c0;">Color1</span> <span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Lazy_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">GetPixel</span>(<span style="color: #c0c0c0;">i</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">j</span>);<br /> <span style="color: #f810b0;">80</span>                     <span style="color: #696969;">//调用GetPixel方法获取像素点的颜色</span><br /> <span style="color: #696969;">81</span>                     <span style="color: #c0c0c0;">Color</span> <span style="color: #c0c0c0;">Color2</span> <span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Lazy_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">GetPixel</span>(<span style="color: #c0c0c0;">i</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">j</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">1</span>);<br /> <span style="color: #696969;">82</span>                     <span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">red</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Math</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Abs</span>(<span style="color: #c0c0c0;">Color1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">R</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">Color2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">R</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">128</span>);<br /> <span style="color: #696969;">83</span>                     <span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">green</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Math</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Abs</span>(<span style="color: #c0c0c0;">Color1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">G</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">Color2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">G</span><span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">128</span>);<br /> <span style="color: #696969;">84</span>                     <span style="color: #ffffff;">int</span> <span style="color: #c0c0c0;">blue</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Math</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Abs</span>(<span style="color: #c0c0c0;">Color1</span><span style="color: #c0c0c0;">.</span>B<span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">Color2</span><span style="color: #c0c0c0;">.</span>B<span style="color: #c0c0c0;">+</span><span style="color: #c0c0c0;">128</span>);<br /> <span style="color: #f810b0;">85</span>                     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">red</span><span style="color: #c0c0c0;">></span><span style="color: #c0c0c0;">255</span>) <span style="color: #c0c0c0;">red</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">255</span>;<br /> <span style="color: #696969;">86</span>                     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">red</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;"></span>) <span style="color: #c0c0c0;">red</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<br /> <span style="color: #696969;">87</span>                     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">green</span><span style="color: #c0c0c0;">></span><span style="color: #c0c0c0;">255</span>) <span style="color: #c0c0c0;">green</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">255</span>;<br /> <span style="color: #696969;">88</span>                     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">green</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;"></span>) <span style="color: #c0c0c0;">green</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<br /> <span style="color: #696969;">89</span>                     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">blue</span><span style="color: #c0c0c0;">></span><span style="color: #c0c0c0;">255</span>) <span style="color: #c0c0c0;">blue</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">255</span>;<br /> <span style="color: #f810b0;">90</span>                     <span style="color: #ff4400; font-weight: bold;">if</span>(<span style="color: #c0c0c0;">blue</span><span style="color: #c0c0c0;"><</span><span style="color: #c0c0c0;"></span>) <span style="color: #c0c0c0;">blue</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;"></span>;<br /> <span style="color: #696969;">91</span>                     <span style="color: #c0c0c0;">Lazy_bitmap</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">SetPixel</span>(<span style="color: #c0c0c0;">i</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">j</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">Color</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">FromArgb</span>(<span style="color: #c0c0c0;">red</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">green</span><span style="color: #c0c0c0;">,</span><span style="color: #c0c0c0;">blue</span>));<br /> <span style="color: #696969;">92</span>                 <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">93</span>             <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">94</span>             <span style="color: #ff4400; font-weight: bold;">this</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">pictureBox1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">Image</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">Lazy_bitmap</span>;<br /> <span style="color: #f810b0;">95</span>         <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">96</span>     <span style="color: #c0c0c0;">}</span><br /> <span style="color: #696969;">97</span> <span style="color: #c0c0c0;">}</span>
</div>

<span style="color: #ff6600;"><a href="http://down.qiannao.com/space/file/flowerowl/-4e0a-4f20-5206-4eab/Lazy24_-56fe-50cf-7eb9-7406-548c-6d6e-96d5-6548-679c.rar/.page" target="_blank"><span style="color: #ff6600;">下载源码</span></a></span>

转载请注明：[于哲的博客][1] &raquo; [C#每天抄一点(24):图像纹理和浮雕效果][2]

 [1]: http://localhost/wordpress
 [2]: http://localhost/wordpress/648.html