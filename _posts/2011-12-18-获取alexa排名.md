---
title: 获取Alexa排名
author: Flowerowl
layout: post
permalink: /1022.html
duoshuo_thread_id:
  - 1266931
views:
  - 873
bot_views:
  - 6
categories:
  - php
  - 代码
---
<div style="background:#fdfdfd;color:black;">
</div>

<div class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: rgb(192, 192, 192); background-color: rgb(0, 0, 0); ">
  <span style="color: rgb(255, 255, 255); "><?php</span><br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 255, 255); font-weight: bold; ">function</span>&nbsp; <span style="color: rgb(0, 255, 255); ">getAlexaRank</span> (<span style="color: rgb(0, 204, 204); ">$Domain</span><span style="color: rgb(192, 192, 192); ">){</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$line</span>&nbsp; <span style="color: rgb(192, 192, 192); ">=</span> <span style="color: rgb(0, 187, 187); ">""</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$data</span>&nbsp; <span style="color: rgb(192, 192, 192); ">=</span> <span style="color: rgb(0, 187, 187); ">""</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$URL</span>&nbsp; <span style="color: rgb(192, 192, 192); ">=</span> <span style="color: rgb(0, 187, 187); ">"http://data.alexa.com/data/?cli=10&dat=snba&ver=7.0&url="</span><span style="color: rgb(192, 192, 192); ">.</span> <span style="color: rgb(0, 204, 204); ">$Domain</span> ;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$fp</span>&nbsp; <span style="color: rgb(192, 192, 192); ">=</span> <span style="color: rgb(192, 192, 192); ">fopen</span> (<span style="color: rgb(0, 204, 204); ">$URL</span> <span style="color: rgb(192, 192, 192); ">,</span><span style="color: rgb(0, 187, 187); ">"r"</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 255, 255); font-weight: bold; ">if</span> (<span style="color: rgb(0, 204, 204); ">$fp</span> <span style="color: rgb(192, 192, 192); ">){</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 255, 255); font-weight: bold; ">while</span> (<span style="color: rgb(192, 192, 192); ">!</span><span style="color: rgb(192, 192, 192); ">feof</span> (<span style="color: rgb(0, 204, 204); ">$fp</span> <span style="color: rgb(192, 192, 192); ">)){</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$line</span>&nbsp; <span style="color: rgb(192, 192, 192); ">=</span> <span style="color: rgb(192, 192, 192); ">fgets</span> (<span style="color: rgb(0, 204, 204); ">$fp</span> );<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$data</span>&nbsp; <span style="color: rgb(192, 192, 192); ">.=</span> <span style="color: rgb(0, 204, 204); ">$line</span> ; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 204, 204); ">$p</span><span style="color: rgb(192, 192, 192); ">=</span> <span style="color: rgb(192, 192, 192); ">xml_parser_create</span> ();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">xml_parse_into_struct</span> (<span style="color: rgb(0, 204, 204); ">$p</span> <span style="color: rgb(192, 192, 192); ">,</span> <span style="color: rgb(0, 204, 204); ">$data</span> <span style="color: rgb(192, 192, 192); ">,</span> <span style="color: rgb(0, 204, 204); ">$vals</span> );<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">xml_parser_free</span> (<span style="color: rgb(0, 204, 204); ">$p</span> );<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 255, 255); font-weight: bold; ">for</span> (<span style="color: rgb(0, 204, 204); ">$i</span> <span style="color: rgb(192, 192, 192); ">=</span><span style="color: rgb(192, 192, 192); "></span> ;<span style="color: rgb(0, 204, 204); ">$i</span> <span style="color: rgb(192, 192, 192); "><</span><span style="color: rgb(192, 192, 192); ">count</span> (<span style="color: rgb(0, 204, 204); ">$vals</span> );<span style="color: rgb(0, 204, 204); ">$i</span> <span style="color: rgb(192, 192, 192); ">++</span><span style="color: rgb(192, 192, 192); ">){</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 255, 255); font-weight: bold; ">if</span> (<span style="color: rgb(0, 204, 204); ">$vals</span> <span style="color: rgb(192, 192, 192); ">[</span><span style="color: rgb(0, 204, 204); ">$i</span> <span style="color: rgb(192, 192, 192); ">][</span><span style="color: rgb(0, 187, 187); ">"tag"</span><span style="color: rgb(192, 192, 192); ">]</span><span style="color: rgb(192, 192, 192); ">==</span><span style="color: rgb(0, 187, 187); ">"POPULARITY"</span><span style="color: rgb(192, 192, 192); ">){</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 255, 255); font-weight: bold; ">return</span>&nbsp; <span style="color: rgb(0, 204, 204); ">$vals</span> <span style="color: rgb(192, 192, 192); ">[</span><span style="color: rgb(0, 204, 204); ">$i</span> <span style="color: rgb(192, 192, 192); ">][</span><span style="color: rgb(0, 187, 187); ">"attributes"</span><span style="color: rgb(192, 192, 192); ">][</span><span style="color: rgb(0, 187, 187); ">"TEXT"</span><span style="color: rgb(192, 192, 192); ">];</span>&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">}</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: rgb(192, 192, 192); ">}</span><br /> <span style="color: rgb(255, 255, 255); ">?></span><br /> <span style="color: rgb(255, 255, 255); "><?php</span><br /> <span style="color: rgb(0, 255, 255); font-weight: bold; ">echo</span> <span style="color: rgb(192, 192, 192); ">getAlexaRank</span>(<span style="color: rgb(0, 187, 187); ">"lazynight.me"</span>);<br /> <span style="color: rgb(255, 255, 255); ">?></span>
</div>

转载请注明：[于哲的博客][1] &raquo; [获取Alexa排名][2]

 [1]: http://localhost/wordpress
 [2]: http://localhost/wordpress/1022.html